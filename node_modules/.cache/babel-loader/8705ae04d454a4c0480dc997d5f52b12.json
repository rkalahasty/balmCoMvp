{"ast":null,"code":"\"use strict\";\n\nconst idlUtils = require(\"../generated/utils.js\");\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst {\n  DOCUMENT_POSITION_CONTAINS,\n  DOCUMENT_POSITION_CONTAINED_BY\n} = require(\"../node-document-position\");\n\nconst Element = require(\"../generated/Element\");\n\nconst Node = require(\"../generated/Node\");\n\nconst HTMLCollectionImpl = require(\"./HTMLCollection-impl\").implementation;\n\nexports.implementation = class HTMLOptionsCollectionImpl extends HTMLCollectionImpl {\n  // inherits supported property indices\n  get length() {\n    this._update();\n\n    return this._list.length;\n  }\n\n  set length(value) {\n    this._update();\n\n    if (value > this._list.length) {\n      const doc = this._element._ownerDocument;\n\n      for (let i = this._list.length; i < value; i++) {\n        const el = doc.createElement(\"option\");\n\n        this._element.appendChild(el);\n      }\n    } else if (value < this._list.length) {\n      for (let i = this._list.length - 1; i >= value; i--) {\n        const el = this._list[i];\n\n        this._element.removeChild(el);\n      }\n    }\n  }\n\n  get [idlUtils.supportedPropertyNames]() {\n    this._update();\n\n    const result = new Set();\n\n    for (const element of this._list) {\n      result.add(element.getAttributeNS(null, \"id\"));\n      result.add(element.getAttributeNS(null, \"name\"));\n    }\n\n    return result;\n  }\n\n  [idlUtils.indexedSetNew](index, value) {\n    if (value === null) {\n      this.remove(index);\n      return;\n    }\n\n    this._update();\n\n    const {\n      length\n    } = this._list;\n    const n = index - length;\n\n    if (n > 0) {\n      const doc = this._element._ownerDocument;\n      const frag = doc.createDocumentFragment(); // Spec says n - 1, but n seems to be the right number here.\n\n      for (let i = 0; i < n; i++) {\n        const el = doc.createElement(\"option\");\n        frag.appendChild(el);\n      }\n\n      this._element._append(frag);\n    }\n\n    if (n >= 0) {\n      this._element._append(value);\n    } else {\n      this._element._replace(value, this._list[index]);\n    }\n  }\n\n  [idlUtils.indexedSetExisting](index, value) {\n    return this[idlUtils.indexedSetNew](index, value);\n  }\n\n  add(element, before) {\n    if (this._element.compareDocumentPosition(element) & DOCUMENT_POSITION_CONTAINS) {\n      throw DOMException.create(this._globalObject, [\"The operation would yield an incorrect node tree.\", \"HierarchyRequestError\"]);\n    }\n\n    if (Element.isImpl(before) && !(this._element.compareDocumentPosition(before) & DOCUMENT_POSITION_CONTAINED_BY)) {\n      throw DOMException.create(this._globalObject, [\"The object can not be found here.\", \"NotFoundError\"]);\n    }\n\n    if (element === before) {\n      return;\n    }\n\n    let reference = null;\n\n    if (Node.isImpl(before)) {\n      reference = before;\n    } else if (typeof before === \"number\") {\n      this._update();\n\n      reference = this._list[before] || null;\n    }\n\n    const parent = reference !== null ? reference.parentNode : this._element;\n\n    parent._preInsert(element, reference);\n  }\n\n  remove(index) {\n    this._update();\n\n    if (this._list.length === 0) {\n      return;\n    }\n\n    if (index < 0 || index >= this._list.length) {\n      return;\n    }\n\n    const element = this._list[index];\n\n    element.parentNode._remove(element);\n  }\n\n  get selectedIndex() {\n    return this._element.selectedIndex;\n  }\n\n  set selectedIndex(value) {\n    this._element.selectedIndex = value;\n  }\n\n};","map":{"version":3,"names":["idlUtils","require","DOMException","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","Element","Node","HTMLCollectionImpl","implementation","exports","HTMLOptionsCollectionImpl","length","_update","_list","value","doc","_element","_ownerDocument","i","el","createElement","appendChild","removeChild","supportedPropertyNames","result","Set","element","add","getAttributeNS","indexedSetNew","index","remove","n","frag","createDocumentFragment","_append","_replace","indexedSetExisting","before","compareDocumentPosition","create","_globalObject","isImpl","reference","parent","parentNode","_preInsert","_remove","selectedIndex"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/nodes/HTMLOptionsCollection-impl.js"],"sourcesContent":["\"use strict\";\n\nconst idlUtils = require(\"../generated/utils.js\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst { DOCUMENT_POSITION_CONTAINS, DOCUMENT_POSITION_CONTAINED_BY } = require(\"../node-document-position\");\nconst Element = require(\"../generated/Element\");\nconst Node = require(\"../generated/Node\");\nconst HTMLCollectionImpl = require(\"./HTMLCollection-impl\").implementation;\n\nexports.implementation = class HTMLOptionsCollectionImpl extends HTMLCollectionImpl {\n  // inherits supported property indices\n  get length() {\n    this._update();\n    return this._list.length;\n  }\n  set length(value) {\n    this._update();\n    if (value > this._list.length) {\n      const doc = this._element._ownerDocument;\n      for (let i = this._list.length; i < value; i++) {\n        const el = doc.createElement(\"option\");\n        this._element.appendChild(el);\n      }\n    } else if (value < this._list.length) {\n      for (let i = this._list.length - 1; i >= value; i--) {\n        const el = this._list[i];\n        this._element.removeChild(el);\n      }\n    }\n  }\n\n  get [idlUtils.supportedPropertyNames]() {\n    this._update();\n    const result = new Set();\n    for (const element of this._list) {\n      result.add(element.getAttributeNS(null, \"id\"));\n      result.add(element.getAttributeNS(null, \"name\"));\n    }\n    return result;\n  }\n  [idlUtils.indexedSetNew](index, value) {\n    if (value === null) {\n      this.remove(index);\n      return;\n    }\n    this._update();\n    const { length } = this._list;\n    const n = index - length;\n    if (n > 0) {\n      const doc = this._element._ownerDocument;\n      const frag = doc.createDocumentFragment();\n      // Spec says n - 1, but n seems to be the right number here.\n      for (let i = 0; i < n; i++) {\n        const el = doc.createElement(\"option\");\n        frag.appendChild(el);\n      }\n      this._element._append(frag);\n    }\n    if (n >= 0) {\n      this._element._append(value);\n    } else {\n      this._element._replace(value, this._list[index]);\n    }\n  }\n  [idlUtils.indexedSetExisting](index, value) {\n    return this[idlUtils.indexedSetNew](index, value);\n  }\n  add(element, before) {\n    if (this._element.compareDocumentPosition(element) & DOCUMENT_POSITION_CONTAINS) {\n      throw DOMException.create(this._globalObject, [\n        \"The operation would yield an incorrect node tree.\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n    if (Element.isImpl(before) && !(this._element.compareDocumentPosition(before) & DOCUMENT_POSITION_CONTAINED_BY)) {\n      throw DOMException.create(this._globalObject, [\"The object can not be found here.\", \"NotFoundError\"]);\n    }\n    if (element === before) {\n      return;\n    }\n\n    let reference = null;\n    if (Node.isImpl(before)) {\n      reference = before;\n    } else if (typeof before === \"number\") {\n      this._update();\n      reference = this._list[before] || null;\n    }\n\n    const parent = reference !== null ? reference.parentNode : this._element;\n    parent._preInsert(element, reference);\n  }\n  remove(index) {\n    this._update();\n    if (this._list.length === 0) {\n      return;\n    }\n    if (index < 0 || index >= this._list.length) {\n      return;\n    }\n    const element = this._list[index];\n    element.parentNode._remove(element);\n  }\n  get selectedIndex() {\n    return this._element.selectedIndex;\n  }\n  set selectedIndex(value) {\n    this._element.selectedIndex = value;\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}