{"ast":null,"code":"\"use strict\";\n\nconst {\n  CookieJar\n} = require(\"tough-cookie\");\n\nconst NodeImpl = require(\"./Node-impl\").implementation;\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst NODE_TYPE = require(\"../node-type\");\n\nconst {\n  hasWeakRefs,\n  mixin,\n  memoizeQuery\n} = require(\"../../utils\");\n\nconst {\n  firstChildWithLocalName,\n  firstChildWithLocalNames,\n  firstDescendantWithLocalName\n} = require(\"../helpers/traversal\");\n\nconst whatwgURL = require(\"whatwg-url\");\n\nconst StyleSheetList = require(\"../generated/StyleSheetList.js\");\n\nconst {\n  domSymbolTree\n} = require(\"../helpers/internal-constants\");\n\nconst eventAccessors = require(\"../helpers/create-event-accessor\");\n\nconst {\n  asciiLowercase,\n  stripAndCollapseASCIIWhitespace\n} = require(\"../helpers/strings\");\n\nconst {\n  childTextContent\n} = require(\"../helpers/text\");\n\nconst {\n  HTML_NS,\n  SVG_NS\n} = require(\"../helpers/namespaces\");\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst {\n  parseIntoDocument\n} = require(\"../../browser/parser\");\n\nconst History = require(\"../generated/History\");\n\nconst Location = require(\"../generated/Location\");\n\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\n\nconst NodeList = require(\"../generated/NodeList\");\n\nconst validateName = require(\"../helpers/validate-names\").name;\n\nconst {\n  validateAndExtract\n} = require(\"../helpers/validate-names\");\n\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\n\nconst {\n  shadowIncludingInclusiveDescendantsIterator\n} = require(\"../helpers/shadow-dom\");\n\nconst {\n  enqueueCECallbackReaction\n} = require(\"../helpers/custom-elements\");\n\nconst {\n  createElement,\n  internalCreateElementNSSteps\n} = require(\"../helpers/create-element\");\n\nconst IterableWeakSet = require(\"../helpers/iterable-weak-set\");\n\nconst DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\n\nconst GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\n\nconst NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\n\nconst ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\n\nconst {\n  clone,\n  listOfElementsWithQualifiedName,\n  listOfElementsWithNamespaceAndLocalName,\n  listOfElementsWithClassNames\n} = require(\"../node\");\n\nconst generatedAttr = require(\"../generated/Attr\");\n\nconst Comment = require(\"../generated/Comment\");\n\nconst ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\n\nconst CDATASection = require(\"../generated/CDATASection\");\n\nconst Text = require(\"../generated/Text\");\n\nconst DocumentFragment = require(\"../generated/DocumentFragment\");\n\nconst DOMImplementation = require(\"../generated/DOMImplementation\");\n\nconst TreeWalker = require(\"../generated/TreeWalker\");\n\nconst NodeIterator = require(\"../generated/NodeIterator\");\n\nconst ShadowRoot = require(\"../generated/ShadowRoot\");\n\nconst Range = require(\"../generated/Range\");\n\nconst documents = require(\"../documents.js\");\n\nconst CustomEvent = require(\"../generated/CustomEvent\");\n\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\n\nconst Event = require(\"../generated/Event\");\n\nconst FocusEvent = require(\"../generated/FocusEvent\");\n\nconst HashChangeEvent = require(\"../generated/HashChangeEvent\");\n\nconst KeyboardEvent = require(\"../generated/KeyboardEvent\");\n\nconst MessageEvent = require(\"../generated/MessageEvent\");\n\nconst MouseEvent = require(\"../generated/MouseEvent\");\n\nconst PopStateEvent = require(\"../generated/PopStateEvent\");\n\nconst ProgressEvent = require(\"../generated/ProgressEvent\");\n\nconst TouchEvent = require(\"../generated/TouchEvent\");\n\nconst UIEvent = require(\"../generated/UIEvent\");\n\nconst RequestManager = require(\"../../browser/resources/request-manager\");\n\nconst AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\n\nconst ResourceQueue = require(\"../../browser/resources/resource-queue\");\n\nconst PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\n\nfunction clearChildNodes(node) {\n  for (let child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\n    node.removeChild(child);\n  }\n}\n\nfunction pad(number) {\n  if (number < 10) {\n    return \"0\" + number;\n  }\n\n  return number;\n}\n\nfunction toLastModifiedString(date) {\n  return pad(date.getMonth() + 1) + \"/\" + pad(date.getDate()) + \"/\" + date.getFullYear() + \" \" + pad(date.getHours()) + \":\" + pad(date.getMinutes()) + \":\" + pad(date.getSeconds());\n}\n\nconst eventInterfaceTable = {\n  customevent: CustomEvent,\n  errorevent: ErrorEvent,\n  event: Event,\n  events: Event,\n  focusevent: FocusEvent,\n  hashchangeevent: HashChangeEvent,\n  htmlevents: Event,\n  keyboardevent: KeyboardEvent,\n  messageevent: MessageEvent,\n  mouseevent: MouseEvent,\n  mouseevents: MouseEvent,\n  popstateevent: PopStateEvent,\n  progressevent: ProgressEvent,\n  svgevents: Event,\n  touchevent: TouchEvent,\n  uievent: UIEvent,\n  uievents: UIEvent\n};\n\nclass DocumentImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n\n    this._initGlobalEvents();\n\n    this._ownerDocument = this;\n    this.nodeType = NODE_TYPE.DOCUMENT_NODE;\n\n    if (!privateData.options) {\n      privateData.options = {};\n    }\n\n    if (!privateData.options.parsingMode) {\n      privateData.options.parsingMode = \"xml\";\n    }\n\n    if (!privateData.options.encoding) {\n      privateData.options.encoding = \"UTF-8\";\n    }\n\n    if (!privateData.options.contentType) {\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\n    }\n\n    this._parsingMode = privateData.options.parsingMode;\n    this._implementation = DOMImplementation.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n    this._defaultView = privateData.options.defaultView || null;\n    this._global = privateData.options.global;\n    this._ids = Object.create(null);\n    this._attached = true;\n    this._currentScript = null;\n    this._pageShowingFlag = false;\n    this._cookieJar = privateData.options.cookieJar;\n    this._parseOptions = privateData.options.parseOptions || {};\n    this._scriptingDisabled = privateData.options.scriptingDisabled;\n\n    if (this._cookieJar === undefined) {\n      this._cookieJar = new CookieJar(null, {\n        looseMode: true\n      });\n    }\n\n    if (this._scriptingDisabled) {\n      this._parseOptions.scriptingEnabled = false;\n    }\n\n    this.contentType = privateData.options.contentType;\n    this._encoding = privateData.options.encoding;\n    const urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\n    const parsed = whatwgURL.parseURL(urlOption);\n\n    if (parsed === null) {\n      throw new TypeError(`Could not parse \"${urlOption}\" as a URL`);\n    }\n\n    this._URL = parsed;\n    this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ? privateData.options.parentOrigin : whatwgURL.serializeURLOrigin(this._URL);\n    this._location = Location.createImpl(this._globalObject, [], {\n      relevantDocument: this\n    });\n    this._history = History.createImpl(this._globalObject, [], {\n      window: this._defaultView,\n      document: this,\n      actAsIfLocationReloadCalled: () => this._location.reload()\n    });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators = new IterableWeakSet();\n    } else {\n      this._workingNodeIterators = [];\n    }\n\n    this._referrer = privateData.options.referrer || \"\";\n    this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\n    this._asyncQueue = new AsyncResourceQueue();\n    this._queue = new ResourceQueue({\n      asyncQueue: this._asyncQueue,\n      paused: false\n    });\n    this._deferQueue = new ResourceQueue({\n      paused: true\n    });\n    this._requestManager = new RequestManager();\n    this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\n    this._lastFocusedElement = null;\n    this._resourceLoader = new PerDocumentResourceLoader(this); // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\n    // it initially has no latest entry.\n\n    this._latestEntry = null; // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\n\n    this._throwOnDynamicMarkupInsertionCounter = 0;\n  }\n\n  _getTheParent(event) {\n    if (event.type === \"load\" || !this._defaultView) {\n      return null;\n    }\n\n    return idlUtils.implForWrapper(this._defaultView);\n  }\n\n  get compatMode() {\n    return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\n  }\n\n  get charset() {\n    return this._encoding;\n  }\n\n  get characterSet() {\n    return this._encoding;\n  }\n\n  get inputEncoding() {\n    return this._encoding;\n  }\n\n  get doctype() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\n        return childNode;\n      }\n    }\n\n    return null;\n  }\n\n  get URL() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n\n  get documentURI() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n\n  get location() {\n    return this._defaultView ? this._location : null;\n  } // https://dom.spec.whatwg.org/#dom-document-documentelement\n\n\n  get documentElement() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        return childNode;\n      }\n    }\n\n    return null;\n  }\n\n  get implementation() {\n    return this._implementation;\n  }\n\n  set implementation(implementation) {\n    this._implementation = implementation;\n  }\n\n  get defaultView() {\n    return this._defaultView;\n  }\n\n  get currentScript() {\n    return this._currentScript;\n  }\n\n  get readyState() {\n    return this._currentDocumentReadiness;\n  }\n\n  set readyState(state) {\n    this._currentDocumentReadiness = state;\n    fireAnEvent(\"readystatechange\", this);\n  }\n\n  hasFocus() {\n    return Boolean(this._lastFocusedElement);\n  }\n\n  _descendantRemoved(parent, child) {\n    if (child.tagName === \"STYLE\") {\n      this.styleSheets._remove(child.sheet);\n    }\n\n    super._descendantRemoved(parent, child);\n  }\n\n  write() {\n    let text = \"\";\n\n    for (let i = 0; i < arguments.length; ++i) {\n      text += i < 0 || arguments.length <= i ? undefined : arguments[i];\n    }\n\n    if (this._parsingMode === \"xml\") {\n      throw DOMException.create(this._globalObject, [\"Cannot use document.write on XML documents\", \"InvalidStateError\"]);\n    }\n\n    if (this._throwOnDynamicMarkupInsertionCounter > 0) {\n      throw DOMException.create(this._globalObject, [\"Cannot use document.write while a custom element upgrades\", \"InvalidStateError\"]);\n    }\n\n    if (this._writeAfterElement) {\n      // If called from an script element directly (during the first tick),\n      // the new elements are inserted right after that element.\n      const tempDiv = this.createElement(\"div\");\n      tempDiv.innerHTML = text;\n      let child = tempDiv.firstChild;\n      let previous = this._writeAfterElement;\n      const parent = this._writeAfterElement.parentNode;\n\n      while (child) {\n        const node = child;\n        child = child.nextSibling;\n        node._isMovingDueToDocumentWrite = true; // hack for script execution\n\n        parent.insertBefore(node, previous.nextSibling);\n        node._isMovingDueToDocumentWrite = false;\n        previous = node;\n      }\n    } else if (this.readyState === \"loading\") {\n      // During page loading, document.write appends to the current element\n      // Find the last child that has been added to the document.\n      if (this.lastChild) {\n        let node = this;\n\n        while (node.lastChild && node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\n          node = node.lastChild;\n        }\n\n        node.innerHTML = text;\n      } else {\n        clearChildNodes(this);\n        parseIntoDocument(text, this);\n      }\n    } else if (text) {\n      clearChildNodes(this);\n      parseIntoDocument(text, this);\n    }\n  }\n\n  writeln() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    this.write(...args, \"\\n\");\n  } // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\n\n\n  getElementById(id) {\n    if (!this._ids[id]) {\n      return null;\n    } // Let's find the first element with where it's root is the document.\n\n\n    const matchElement = this._ids[id].find(candidate => {\n      let root = candidate;\n\n      while (domSymbolTree.parent(root)) {\n        root = domSymbolTree.parent(root);\n      }\n\n      return root === this;\n    });\n\n    return matchElement || null;\n  }\n\n  get referrer() {\n    return this._referrer || \"\";\n  }\n\n  get lastModified() {\n    return this._lastModified;\n  }\n\n  get images() {\n    return this.getElementsByTagName(\"IMG\");\n  }\n\n  get embeds() {\n    return this.getElementsByTagName(\"EMBED\");\n  }\n\n  get plugins() {\n    return this.embeds;\n  }\n\n  get links() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => (node._localName === \"a\" || node._localName === \"area\") && node.hasAttributeNS(null, \"href\") && node._namespaceURI === HTML_NS\n      })\n    });\n  }\n\n  get forms() {\n    return this.getElementsByTagName(\"FORM\");\n  }\n\n  get scripts() {\n    return this.getElementsByTagName(\"SCRIPT\");\n  }\n\n  get anchors() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node._localName === \"a\" && node.hasAttributeNS(null, \"name\") && node._namespaceURI === HTML_NS\n      })\n    });\n  } // The applets attribute must return an\n  // HTMLCollection rooted at the Document node,\n  // whose filter matches nothing.\n  // (It exists for historical reasons.)\n\n\n  get applets() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => []\n    });\n  }\n\n  open() {\n    let child = domSymbolTree.firstChild(this);\n\n    while (child) {\n      this.removeChild(child);\n      child = domSymbolTree.firstChild(this);\n    }\n\n    this._modified();\n\n    return this;\n  }\n\n  close(noQueue) {\n    // In some cases like when creating an empty iframe, I want to emit the\n    // events right away to avoid problems if later I asign the property src.\n    if (noQueue) {\n      this.readyState = \"complete\";\n      fireAnEvent(\"DOMContentLoaded\", this, undefined, {\n        bubbles: true\n      });\n      fireAnEvent(\"load\", this);\n      return;\n    }\n\n    this._queue.resume();\n\n    const dummyPromise = Promise.resolve();\n\n    const onDOMContentLoad = () => {\n      const doc = this;\n\n      function dispatchEvent() {\n        // https://html.spec.whatwg.org/#the-end\n        doc.readyState = \"interactive\";\n        fireAnEvent(\"DOMContentLoaded\", doc, undefined, {\n          bubbles: true\n        });\n      }\n\n      return new Promise(resolve => {\n        if (!this._deferQueue.tail) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._deferQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n\n        this._deferQueue.resume();\n      });\n    };\n\n    const onLoad = () => {\n      const doc = this;\n\n      function dispatchEvent() {\n        doc.readyState = \"complete\";\n        fireAnEvent(\"load\", doc);\n      }\n\n      return new Promise(resolve => {\n        if (this._asyncQueue.count() === 0) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._asyncQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n      });\n    };\n\n    this._queue.push(dummyPromise, onDOMContentLoad, null); // Set the readyState to 'complete' once all resources are loaded.\n    // As a side-effect the document's load-event will be dispatched.\n\n\n    this._queue.push(dummyPromise, onLoad, null, true);\n  }\n\n  getElementsByName(elementName) {\n    return NodeList.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName\n      })\n    });\n  }\n\n  get title() {\n    const {\n      documentElement\n    } = this;\n    let value = \"\";\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      const svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (svgTitleElement) {\n        value = childTextContent(svgTitleElement);\n      }\n    } else {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n\n      if (titleElement) {\n        value = childTextContent(titleElement);\n      }\n    }\n\n    value = stripAndCollapseASCIIWhitespace(value);\n    return value;\n  }\n\n  set title(value) {\n    const {\n      documentElement\n    } = this;\n    let element;\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (!element) {\n        element = this.createElementNS(SVG_NS, \"title\");\n\n        this._insert(element, documentElement.firstChild);\n      }\n\n      element.textContent = value;\n    } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n      const headElement = this.head;\n\n      if (titleElement === null && headElement === null) {\n        return;\n      }\n\n      if (titleElement !== null) {\n        element = titleElement;\n      } else {\n        element = this.createElement(\"title\");\n\n        headElement._append(element);\n      }\n\n      element.textContent = value;\n    }\n  }\n\n  get dir() {\n    return this.documentElement ? this.documentElement.dir : \"\";\n  }\n\n  set dir(value) {\n    if (this.documentElement) {\n      this.documentElement.dir = value;\n    }\n  }\n\n  get head() {\n    return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\n  }\n\n  get body() {\n    const {\n      documentElement\n    } = this;\n\n    if (!documentElement || documentElement._localName !== \"html\" || documentElement._namespaceURI !== HTML_NS) {\n      return null;\n    }\n\n    return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\n  }\n\n  set body(value) {\n    if (value === null || value._namespaceURI !== HTML_NS || value._localName !== \"body\" && value._localName !== \"frameset\") {\n      throw DOMException.create(this._globalObject, [\"Cannot set the body to null or a non-body/frameset element\", \"HierarchyRequestError\"]);\n    }\n\n    const bodyElement = this.body;\n\n    if (value === bodyElement) {\n      return;\n    }\n\n    if (bodyElement !== null) {\n      bodyElement.parentNode._replace(value, bodyElement);\n\n      return;\n    }\n\n    const {\n      documentElement\n    } = this;\n\n    if (documentElement === null) {\n      throw DOMException.create(this._globalObject, [\"Cannot set the body when there is no document element\", \"HierarchyRequestError\"]);\n    }\n\n    documentElement._append(value);\n  }\n\n  _runPreRemovingSteps(oldNode) {\n    // https://html.spec.whatwg.org/#focus-fixup-rule\n    if (oldNode === this.activeElement) {\n      this._lastFocusedElement = this.body;\n    }\n\n    for (const activeNodeIterator of this._workingNodeIterators) {\n      activeNodeIterator._preRemovingSteps(oldNode);\n    }\n  }\n\n  createEvent(type) {\n    const typeLower = type.toLowerCase();\n    const eventWrapper = eventInterfaceTable[typeLower] || null;\n\n    if (!eventWrapper) {\n      throw DOMException.create(this._globalObject, [\"The provided event type (\\\"\" + type + \"\\\") is invalid\", \"NotSupportedError\"]);\n    }\n\n    const impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\n    impl._initializedFlag = false;\n    return impl;\n  }\n\n  createRange() {\n    return Range.createImpl(this._globalObject, [], {\n      start: {\n        node: this,\n        offset: 0\n      },\n      end: {\n        node: this,\n        offset: 0\n      }\n    });\n  }\n\n  createProcessingInstruction(target, data) {\n    validateName(this._globalObject, target);\n\n    if (data.includes(\"?>\")) {\n      throw DOMException.create(this._globalObject, [\"Processing instruction data cannot contain the string \\\"?>\\\"\", \"InvalidCharacterError\"]);\n    }\n\n    return ProcessingInstruction.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      target,\n      data\n    });\n  } // https://dom.spec.whatwg.org/#dom-document-createcdatasection\n\n\n  createCDATASection(data) {\n    if (this._parsingMode === \"html\") {\n      throw DOMException.create(this._globalObject, [\"Cannot create CDATA sections in HTML documents\", \"NotSupportedError\"]);\n    }\n\n    if (data.includes(\"]]>\")) {\n      throw DOMException.create(this._globalObject, [\"CDATA section data cannot contain the string \\\"]]>\\\"\", \"InvalidCharacterError\"]);\n    }\n\n    return CDATASection.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createTextNode(data) {\n    return Text.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createComment(data) {\n    return Comment.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  } // https://dom.spec.whatwg.org/#dom-document-createelement\n\n\n  createElement(localName, options) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    let isValue = null;\n\n    if (options && options.is !== undefined) {\n      isValue = options.is;\n    }\n\n    const namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\n    return createElement(this, localName, namespace, null, isValue, true);\n  } // https://dom.spec.whatwg.org/#dom-document-createelementns\n\n\n  createElementNS(namespace, qualifiedName, options) {\n    return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\n  }\n\n  createDocumentFragment() {\n    return DocumentFragment.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n  }\n\n  createAttribute(localName) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    return this._createAttribute({\n      localName\n    });\n  }\n\n  createAttributeNS(namespace, name) {\n    if (namespace === undefined) {\n      namespace = null;\n    }\n\n    namespace = namespace !== null ? String(namespace) : namespace;\n    const extracted = validateAndExtract(this._globalObject, namespace, name);\n    return this._createAttribute({\n      namespace: extracted.namespace,\n      namespacePrefix: extracted.prefix,\n      localName: extracted.localName\n    });\n  } // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\n  // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\n\n\n  _createAttribute(_ref) {\n    let {\n      localName,\n      value,\n      namespace,\n      namespacePrefix\n    } = _ref;\n    return generatedAttr.createImpl(this._globalObject, [], {\n      localName,\n      value,\n      namespace,\n      namespacePrefix,\n      ownerDocument: this\n    });\n  }\n\n  createTreeWalker(root, whatToShow, filter) {\n    return TreeWalker.createImpl(this._globalObject, [], {\n      root,\n      whatToShow,\n      filter\n    });\n  }\n\n  createNodeIterator(root, whatToShow, filter) {\n    const nodeIterator = NodeIterator.createImpl(this._globalObject, [], {\n      root,\n      whatToShow,\n      filter\n    });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators.add(nodeIterator);\n    } else {\n      this._workingNodeIterators.push(nodeIterator);\n\n      while (this._workingNodeIterators.length > 10) {\n        const toInactivate = this._workingNodeIterators.shift();\n\n        toInactivate._working = false;\n      }\n    }\n\n    return nodeIterator;\n  }\n\n  importNode(node, deep) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\"Cannot import a document node\", \"NotSupportedError\"]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"NotSupportedError\"]);\n    }\n\n    return clone(node, this, deep);\n  } // https://dom.spec.whatwg.org/#dom-document-adoptnode\n\n\n  adoptNode(node) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a document node\", \"NotSupportedError\"]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"HierarchyRequestError\"]);\n    }\n\n    this._adoptNode(node);\n\n    return node;\n  } // https://dom.spec.whatwg.org/#concept-node-adopt\n\n\n  _adoptNode(node) {\n    const newDocument = this;\n    const oldDocument = node._ownerDocument;\n    const parent = domSymbolTree.parent(node);\n\n    if (parent) {\n      parent._remove(node);\n    }\n\n    if (oldDocument !== newDocument) {\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        inclusiveDescendant._ownerDocument = newDocument;\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._ceState === \"custom\") {\n          enqueueCECallbackReaction(inclusiveDescendant, \"adoptedCallback\", [idlUtils.wrapperForImpl(oldDocument), idlUtils.wrapperForImpl(newDocument)]);\n        }\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._adoptingSteps) {\n          inclusiveDescendant._adoptingSteps(oldDocument);\n        }\n      }\n    }\n  }\n\n  get cookie() {\n    return this._cookieJar.getCookieStringSync(this.URL, {\n      http: false\n    });\n  }\n\n  set cookie(cookieStr) {\n    cookieStr = String(cookieStr);\n\n    this._cookieJar.setCookieSync(cookieStr, this.URL, {\n      http: false,\n      ignoreError: true\n    });\n  } // The clear(), captureEvents(), and releaseEvents() methods must do nothing\n\n\n  clear() {}\n\n  captureEvents() {}\n\n  releaseEvents() {}\n\n  get styleSheets() {\n    if (!this._styleSheets) {\n      this._styleSheets = StyleSheetList.createImpl(this._globalObject);\n    } // TODO: each style and link element should register its sheet on creation\n    // and remove it on removal.\n\n\n    return this._styleSheets;\n  }\n\n  get hidden() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get visibilityState() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return \"visible\";\n    }\n\n    return \"prerender\";\n  } // https://w3c.github.io/selection-api/#extensions-to-document-interface\n\n\n  getSelection() {\n    return this._defaultView ? this._defaultView._selection : null;\n  } // Needed to ensure that the resulting document has the correct prototype chain:\n  // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\n\n\n  _cloneDocument() {\n    const copy = documents.createImpl(this._globalObject, {\n      contentType: this.contentType,\n      encoding: this._encoding,\n      parsingMode: this._parsingMode\n    });\n    copy._URL = this._URL;\n    copy._origin = this._origin;\n    return copy;\n  }\n\n}\n\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\n  return listOfElementsWithQualifiedName(qualifiedName, this);\n});\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\n});\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\n  return listOfElementsWithClassNames(classNames, this);\n});\nmodule.exports = {\n  implementation: DocumentImpl\n};","map":{"version":3,"names":["CookieJar","require","NodeImpl","implementation","idlUtils","NODE_TYPE","hasWeakRefs","mixin","memoizeQuery","firstChildWithLocalName","firstChildWithLocalNames","firstDescendantWithLocalName","whatwgURL","StyleSheetList","domSymbolTree","eventAccessors","asciiLowercase","stripAndCollapseASCIIWhitespace","childTextContent","HTML_NS","SVG_NS","DOMException","parseIntoDocument","History","Location","HTMLCollection","NodeList","validateName","name","validateAndExtract","fireAnEvent","shadowIncludingInclusiveDescendantsIterator","enqueueCECallbackReaction","createElement","internalCreateElementNSSteps","IterableWeakSet","DocumentOrShadowRootImpl","GlobalEventHandlersImpl","NonElementParentNodeImpl","ParentNodeImpl","clone","listOfElementsWithQualifiedName","listOfElementsWithNamespaceAndLocalName","listOfElementsWithClassNames","generatedAttr","Comment","ProcessingInstruction","CDATASection","Text","DocumentFragment","DOMImplementation","TreeWalker","NodeIterator","ShadowRoot","Range","documents","CustomEvent","ErrorEvent","Event","FocusEvent","HashChangeEvent","KeyboardEvent","MessageEvent","MouseEvent","PopStateEvent","ProgressEvent","TouchEvent","UIEvent","RequestManager","AsyncResourceQueue","ResourceQueue","PerDocumentResourceLoader","clearChildNodes","node","child","firstChild","removeChild","pad","number","toLastModifiedString","date","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","eventInterfaceTable","customevent","errorevent","event","events","focusevent","hashchangeevent","htmlevents","keyboardevent","messageevent","mouseevent","mouseevents","popstateevent","progressevent","svgevents","touchevent","uievent","uievents","DocumentImpl","constructor","globalObject","args","privateData","_initGlobalEvents","_ownerDocument","nodeType","DOCUMENT_NODE","options","parsingMode","encoding","contentType","_parsingMode","_implementation","createImpl","_globalObject","ownerDocument","_defaultView","defaultView","_global","global","_ids","Object","create","_attached","_currentScript","_pageShowingFlag","_cookieJar","cookieJar","_parseOptions","parseOptions","_scriptingDisabled","scriptingDisabled","undefined","looseMode","scriptingEnabled","_encoding","urlOption","url","parsed","parseURL","TypeError","_URL","_origin","parentOrigin","serializeURLOrigin","_location","relevantDocument","_history","window","document","actAsIfLocationReloadCalled","reload","_workingNodeIterators","_referrer","referrer","_lastModified","lastModified","Date","_asyncQueue","_queue","asyncQueue","paused","_deferQueue","_requestManager","_currentDocumentReadiness","readyState","_lastFocusedElement","_resourceLoader","_latestEntry","_throwOnDynamicMarkupInsertionCounter","_getTheParent","type","implForWrapper","compatMode","doctype","charset","characterSet","inputEncoding","childNode","childrenIterator","DOCUMENT_TYPE_NODE","URL","serializeURL","documentURI","location","documentElement","ELEMENT_NODE","currentScript","state","hasFocus","Boolean","_descendantRemoved","parent","tagName","styleSheets","_remove","sheet","write","text","i","length","_writeAfterElement","tempDiv","innerHTML","previous","parentNode","nextSibling","_isMovingDueToDocumentWrite","insertBefore","lastChild","writeln","getElementById","id","matchElement","find","candidate","root","images","getElementsByTagName","embeds","plugins","links","element","query","treeToArray","filter","_localName","hasAttributeNS","_namespaceURI","forms","scripts","anchors","applets","open","_modified","close","noQueue","bubbles","resume","dummyPromise","Promise","resolve","onDOMContentLoad","doc","dispatchEvent","tail","setListener","onLoad","count","push","getElementsByName","elementName","getAttributeNS","title","value","svgTitleElement","titleElement","createElementNS","_insert","textContent","headElement","head","_append","dir","body","Set","bodyElement","_replace","_runPreRemovingSteps","oldNode","activeElement","activeNodeIterator","_preRemovingSteps","createEvent","typeLower","toLowerCase","eventWrapper","impl","_initializedFlag","createRange","start","offset","end","createProcessingInstruction","target","data","includes","createCDATASection","createTextNode","createComment","localName","isValue","is","namespace","qualifiedName","createDocumentFragment","createAttribute","_createAttribute","createAttributeNS","String","extracted","namespacePrefix","prefix","createTreeWalker","whatToShow","createNodeIterator","nodeIterator","add","toInactivate","shift","_working","importNode","deep","isImpl","adoptNode","_adoptNode","newDocument","oldDocument","inclusiveDescendant","_ceState","wrapperForImpl","_adoptingSteps","cookie","getCookieStringSync","http","cookieStr","setCookieSync","ignoreError","clear","captureEvents","releaseEvents","_styleSheets","hidden","_pretendToBeVisual","visibilityState","getSelection","_selection","_cloneDocument","copy","createEventAccessor","prototype","getElementsByTagNameNS","getElementsByClassName","classNames","module","exports"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/nodes/Document-impl.js"],"sourcesContent":["\"use strict\";\n\nconst { CookieJar } = require(\"tough-cookie\");\n\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst idlUtils = require(\"../generated/utils\");\nconst NODE_TYPE = require(\"../node-type\");\nconst { hasWeakRefs, mixin, memoizeQuery } = require(\"../../utils\");\nconst { firstChildWithLocalName, firstChildWithLocalNames, firstDescendantWithLocalName } =\n  require(\"../helpers/traversal\");\nconst whatwgURL = require(\"whatwg-url\");\nconst StyleSheetList = require(\"../generated/StyleSheetList.js\");\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\nconst eventAccessors = require(\"../helpers/create-event-accessor\");\nconst { asciiLowercase, stripAndCollapseASCIIWhitespace } = require(\"../helpers/strings\");\nconst { childTextContent } = require(\"../helpers/text\");\nconst { HTML_NS, SVG_NS } = require(\"../helpers/namespaces\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst { parseIntoDocument } = require(\"../../browser/parser\");\nconst History = require(\"../generated/History\");\nconst Location = require(\"../generated/Location\");\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\nconst NodeList = require(\"../generated/NodeList\");\nconst validateName = require(\"../helpers/validate-names\").name;\nconst { validateAndExtract } = require(\"../helpers/validate-names\");\nconst { fireAnEvent } = require(\"../helpers/events\");\nconst { shadowIncludingInclusiveDescendantsIterator } = require(\"../helpers/shadow-dom\");\nconst { enqueueCECallbackReaction } = require(\"../helpers/custom-elements\");\nconst { createElement, internalCreateElementNSSteps } = require(\"../helpers/create-element\");\nconst IterableWeakSet = require(\"../helpers/iterable-weak-set\");\n\nconst DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\nconst GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\nconst NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\nconst ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\n\nconst { clone, listOfElementsWithQualifiedName, listOfElementsWithNamespaceAndLocalName,\n  listOfElementsWithClassNames } = require(\"../node\");\nconst generatedAttr = require(\"../generated/Attr\");\nconst Comment = require(\"../generated/Comment\");\nconst ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\nconst CDATASection = require(\"../generated/CDATASection\");\nconst Text = require(\"../generated/Text\");\nconst DocumentFragment = require(\"../generated/DocumentFragment\");\nconst DOMImplementation = require(\"../generated/DOMImplementation\");\nconst TreeWalker = require(\"../generated/TreeWalker\");\nconst NodeIterator = require(\"../generated/NodeIterator\");\nconst ShadowRoot = require(\"../generated/ShadowRoot\");\nconst Range = require(\"../generated/Range\");\nconst documents = require(\"../documents.js\");\n\nconst CustomEvent = require(\"../generated/CustomEvent\");\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\nconst Event = require(\"../generated/Event\");\nconst FocusEvent = require(\"../generated/FocusEvent\");\nconst HashChangeEvent = require(\"../generated/HashChangeEvent\");\nconst KeyboardEvent = require(\"../generated/KeyboardEvent\");\nconst MessageEvent = require(\"../generated/MessageEvent\");\nconst MouseEvent = require(\"../generated/MouseEvent\");\nconst PopStateEvent = require(\"../generated/PopStateEvent\");\nconst ProgressEvent = require(\"../generated/ProgressEvent\");\nconst TouchEvent = require(\"../generated/TouchEvent\");\nconst UIEvent = require(\"../generated/UIEvent\");\n\nconst RequestManager = require(\"../../browser/resources/request-manager\");\nconst AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\nconst ResourceQueue = require(\"../../browser/resources/resource-queue\");\nconst PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\n\nfunction clearChildNodes(node) {\n  for (let child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\n    node.removeChild(child);\n  }\n}\n\nfunction pad(number) {\n  if (number < 10) {\n    return \"0\" + number;\n  }\n  return number;\n}\n\nfunction toLastModifiedString(date) {\n  return pad(date.getMonth() + 1) +\n    \"/\" + pad(date.getDate()) +\n    \"/\" + date.getFullYear() +\n    \" \" + pad(date.getHours()) +\n    \":\" + pad(date.getMinutes()) +\n    \":\" + pad(date.getSeconds());\n}\n\nconst eventInterfaceTable = {\n  customevent: CustomEvent,\n  errorevent: ErrorEvent,\n  event: Event,\n  events: Event,\n  focusevent: FocusEvent,\n  hashchangeevent: HashChangeEvent,\n  htmlevents: Event,\n  keyboardevent: KeyboardEvent,\n  messageevent: MessageEvent,\n  mouseevent: MouseEvent,\n  mouseevents: MouseEvent,\n  popstateevent: PopStateEvent,\n  progressevent: ProgressEvent,\n  svgevents: Event,\n  touchevent: TouchEvent,\n  uievent: UIEvent,\n  uievents: UIEvent\n};\n\nclass DocumentImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n\n    this._initGlobalEvents();\n\n    this._ownerDocument = this;\n    this.nodeType = NODE_TYPE.DOCUMENT_NODE;\n    if (!privateData.options) {\n      privateData.options = {};\n    }\n    if (!privateData.options.parsingMode) {\n      privateData.options.parsingMode = \"xml\";\n    }\n    if (!privateData.options.encoding) {\n      privateData.options.encoding = \"UTF-8\";\n    }\n    if (!privateData.options.contentType) {\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\n    }\n\n    this._parsingMode = privateData.options.parsingMode;\n\n    this._implementation = DOMImplementation.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n\n    this._defaultView = privateData.options.defaultView || null;\n    this._global = privateData.options.global;\n    this._ids = Object.create(null);\n    this._attached = true;\n    this._currentScript = null;\n    this._pageShowingFlag = false;\n    this._cookieJar = privateData.options.cookieJar;\n    this._parseOptions = privateData.options.parseOptions || {};\n    this._scriptingDisabled = privateData.options.scriptingDisabled;\n    if (this._cookieJar === undefined) {\n      this._cookieJar = new CookieJar(null, { looseMode: true });\n    }\n\n    if (this._scriptingDisabled) {\n      this._parseOptions.scriptingEnabled = false;\n    }\n\n    this.contentType = privateData.options.contentType;\n    this._encoding = privateData.options.encoding;\n\n    const urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\n    const parsed = whatwgURL.parseURL(urlOption);\n    if (parsed === null) {\n      throw new TypeError(`Could not parse \"${urlOption}\" as a URL`);\n    }\n\n    this._URL = parsed;\n    this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ?\n      privateData.options.parentOrigin :\n      whatwgURL.serializeURLOrigin(this._URL);\n\n    this._location = Location.createImpl(this._globalObject, [], { relevantDocument: this });\n    this._history = History.createImpl(this._globalObject, [], {\n      window: this._defaultView,\n      document: this,\n      actAsIfLocationReloadCalled: () => this._location.reload()\n    });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators = new IterableWeakSet();\n    } else {\n      this._workingNodeIterators = [];\n    }\n\n    this._referrer = privateData.options.referrer || \"\";\n    this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\n    this._asyncQueue = new AsyncResourceQueue();\n    this._queue = new ResourceQueue({ asyncQueue: this._asyncQueue, paused: false });\n    this._deferQueue = new ResourceQueue({ paused: true });\n    this._requestManager = new RequestManager();\n    this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\n\n    this._lastFocusedElement = null;\n\n    this._resourceLoader = new PerDocumentResourceLoader(this);\n\n    // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\n    // it initially has no latest entry.\n    this._latestEntry = null;\n\n    // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\n    this._throwOnDynamicMarkupInsertionCounter = 0;\n  }\n\n  _getTheParent(event) {\n    if (event.type === \"load\" || !this._defaultView) {\n      return null;\n    }\n\n    return idlUtils.implForWrapper(this._defaultView);\n  }\n\n  get compatMode() {\n    return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\n  }\n  get charset() {\n    return this._encoding;\n  }\n  get characterSet() {\n    return this._encoding;\n  }\n  get inputEncoding() {\n    return this._encoding;\n  }\n  get doctype() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\n        return childNode;\n      }\n    }\n    return null;\n  }\n  get URL() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get documentURI() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get location() {\n    return this._defaultView ? this._location : null;\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-documentelement\n  get documentElement() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        return childNode;\n      }\n    }\n\n    return null;\n  }\n\n  get implementation() {\n    return this._implementation;\n  }\n  set implementation(implementation) {\n    this._implementation = implementation;\n  }\n\n  get defaultView() {\n    return this._defaultView;\n  }\n\n  get currentScript() {\n    return this._currentScript;\n  }\n\n  get readyState() {\n    return this._currentDocumentReadiness;\n  }\n\n  set readyState(state) {\n    this._currentDocumentReadiness = state;\n    fireAnEvent(\"readystatechange\", this);\n  }\n\n  hasFocus() {\n    return Boolean(this._lastFocusedElement);\n  }\n\n  _descendantRemoved(parent, child) {\n    if (child.tagName === \"STYLE\") {\n      this.styleSheets._remove(child.sheet);\n    }\n\n    super._descendantRemoved(parent, child);\n  }\n\n  write(...args) {\n    let text = \"\";\n    for (let i = 0; i < args.length; ++i) {\n      text += args[i];\n    }\n\n    if (this._parsingMode === \"xml\") {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot use document.write on XML documents\",\n        \"InvalidStateError\"\n      ]);\n    }\n\n    if (this._throwOnDynamicMarkupInsertionCounter > 0) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot use document.write while a custom element upgrades\",\n        \"InvalidStateError\"\n      ]);\n    }\n\n    if (this._writeAfterElement) {\n      // If called from an script element directly (during the first tick),\n      // the new elements are inserted right after that element.\n      const tempDiv = this.createElement(\"div\");\n      tempDiv.innerHTML = text;\n\n      let child = tempDiv.firstChild;\n      let previous = this._writeAfterElement;\n      const parent = this._writeAfterElement.parentNode;\n\n      while (child) {\n        const node = child;\n        child = child.nextSibling;\n\n        node._isMovingDueToDocumentWrite = true; // hack for script execution\n        parent.insertBefore(node, previous.nextSibling);\n        node._isMovingDueToDocumentWrite = false;\n\n        previous = node;\n      }\n    } else if (this.readyState === \"loading\") {\n      // During page loading, document.write appends to the current element\n      // Find the last child that has been added to the document.\n      if (this.lastChild) {\n        let node = this;\n        while (node.lastChild && node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\n          node = node.lastChild;\n        }\n        node.innerHTML = text;\n      } else {\n        clearChildNodes(this);\n        parseIntoDocument(text, this);\n      }\n    } else if (text) {\n      clearChildNodes(this);\n      parseIntoDocument(text, this);\n    }\n  }\n\n  writeln(...args) {\n    this.write(...args, \"\\n\");\n  }\n\n  // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\n  getElementById(id) {\n    if (!this._ids[id]) {\n      return null;\n    }\n\n    // Let's find the first element with where it's root is the document.\n    const matchElement = this._ids[id].find(candidate => {\n      let root = candidate;\n      while (domSymbolTree.parent(root)) {\n        root = domSymbolTree.parent(root);\n      }\n\n      return root === this;\n    });\n\n    return matchElement || null;\n  }\n\n  get referrer() {\n    return this._referrer || \"\";\n  }\n  get lastModified() {\n    return this._lastModified;\n  }\n  get images() {\n    return this.getElementsByTagName(\"IMG\");\n  }\n  get embeds() {\n    return this.getElementsByTagName(\"EMBED\");\n  }\n  get plugins() {\n    return this.embeds;\n  }\n  get links() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => (node._localName === \"a\" || node._localName === \"area\") &&\n                        node.hasAttributeNS(null, \"href\") &&\n                        node._namespaceURI === HTML_NS\n      })\n    });\n  }\n  get forms() {\n    return this.getElementsByTagName(\"FORM\");\n  }\n  get scripts() {\n    return this.getElementsByTagName(\"SCRIPT\");\n  }\n  get anchors() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node._localName === \"a\" &&\n                        node.hasAttributeNS(null, \"name\") &&\n                        node._namespaceURI === HTML_NS\n      })\n    });\n  }\n\n  // The applets attribute must return an\n  // HTMLCollection rooted at the Document node,\n  // whose filter matches nothing.\n  // (It exists for historical reasons.)\n  get applets() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => []\n    });\n  }\n\n  open() {\n    let child = domSymbolTree.firstChild(this);\n    while (child) {\n      this.removeChild(child);\n      child = domSymbolTree.firstChild(this);\n    }\n    this._modified();\n    return this;\n  }\n  close(noQueue) {\n    // In some cases like when creating an empty iframe, I want to emit the\n    // events right away to avoid problems if later I asign the property src.\n    if (noQueue) {\n      this.readyState = \"complete\";\n\n      fireAnEvent(\"DOMContentLoaded\", this, undefined, { bubbles: true });\n      fireAnEvent(\"load\", this);\n\n      return;\n    }\n    this._queue.resume();\n\n    const dummyPromise = Promise.resolve();\n\n    const onDOMContentLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        // https://html.spec.whatwg.org/#the-end\n        doc.readyState = \"interactive\";\n        fireAnEvent(\"DOMContentLoaded\", doc, undefined, { bubbles: true });\n      }\n\n      return new Promise(resolve => {\n        if (!this._deferQueue.tail) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._deferQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n\n        this._deferQueue.resume();\n      });\n    };\n\n    const onLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        doc.readyState = \"complete\";\n        fireAnEvent(\"load\", doc);\n      }\n\n      return new Promise(resolve => {\n        if (this._asyncQueue.count() === 0) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n\n        this._asyncQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n      });\n    };\n\n    this._queue.push(dummyPromise, onDOMContentLoad, null);\n    // Set the readyState to 'complete' once all resources are loaded.\n    // As a side-effect the document's load-event will be dispatched.\n    this._queue.push(dummyPromise, onLoad, null, true);\n  }\n\n  getElementsByName(elementName) {\n    return NodeList.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName\n      })\n    });\n  }\n\n  get title() {\n    const { documentElement } = this;\n    let value = \"\";\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      const svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (svgTitleElement) {\n        value = childTextContent(svgTitleElement);\n      }\n    } else {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n\n      if (titleElement) {\n        value = childTextContent(titleElement);\n      }\n    }\n\n    value = stripAndCollapseASCIIWhitespace(value);\n\n    return value;\n  }\n\n  set title(value) {\n    const { documentElement } = this;\n    let element;\n\n    if (documentElement && documentElement._localName === \"svg\") {\n      element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n\n      if (!element) {\n        element = this.createElementNS(SVG_NS, \"title\");\n\n        this._insert(element, documentElement.firstChild);\n      }\n\n      element.textContent = value;\n    } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n      const headElement = this.head;\n\n      if (titleElement === null && headElement === null) {\n        return;\n      }\n\n      if (titleElement !== null) {\n        element = titleElement;\n      } else {\n        element = this.createElement(\"title\");\n        headElement._append(element);\n      }\n\n      element.textContent = value;\n    }\n  }\n\n  get dir() {\n    return this.documentElement ? this.documentElement.dir : \"\";\n  }\n  set dir(value) {\n    if (this.documentElement) {\n      this.documentElement.dir = value;\n    }\n  }\n\n  get head() {\n    return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\n  }\n\n  get body() {\n    const { documentElement } = this;\n    if (!documentElement || documentElement._localName !== \"html\" ||\n        documentElement._namespaceURI !== HTML_NS) {\n      return null;\n    }\n\n    return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\n  }\n\n  set body(value) {\n    if (value === null ||\n        value._namespaceURI !== HTML_NS ||\n        (value._localName !== \"body\" && value._localName !== \"frameset\")) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot set the body to null or a non-body/frameset element\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    const bodyElement = this.body;\n    if (value === bodyElement) {\n      return;\n    }\n\n    if (bodyElement !== null) {\n      bodyElement.parentNode._replace(value, bodyElement);\n      return;\n    }\n\n    const { documentElement } = this;\n    if (documentElement === null) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot set the body when there is no document element\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    documentElement._append(value);\n  }\n\n  _runPreRemovingSteps(oldNode) {\n    // https://html.spec.whatwg.org/#focus-fixup-rule\n    if (oldNode === this.activeElement) {\n      this._lastFocusedElement = this.body;\n    }\n    for (const activeNodeIterator of this._workingNodeIterators) {\n      activeNodeIterator._preRemovingSteps(oldNode);\n    }\n  }\n\n  createEvent(type) {\n    const typeLower = type.toLowerCase();\n    const eventWrapper = eventInterfaceTable[typeLower] || null;\n\n    if (!eventWrapper) {\n      throw DOMException.create(this._globalObject, [\n        \"The provided event type (\\\"\" + type + \"\\\") is invalid\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    const impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\n    impl._initializedFlag = false;\n    return impl;\n  }\n\n  createRange() {\n    return Range.createImpl(this._globalObject, [], {\n      start: { node: this, offset: 0 },\n      end: { node: this, offset: 0 }\n    });\n  }\n\n  createProcessingInstruction(target, data) {\n    validateName(this._globalObject, target);\n\n    if (data.includes(\"?>\")) {\n      throw DOMException.create(this._globalObject, [\n        \"Processing instruction data cannot contain the string \\\"?>\\\"\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n\n    return ProcessingInstruction.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      target,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createcdatasection\n  createCDATASection(data) {\n    if (this._parsingMode === \"html\") {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot create CDATA sections in HTML documents\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    if (data.includes(\"]]>\")) {\n      throw DOMException.create(this._globalObject, [\n        \"CDATA section data cannot contain the string \\\"]]>\\\"\",\n        \"InvalidCharacterError\"\n      ]);\n    }\n\n    return CDATASection.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createTextNode(data) {\n    return Text.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  createComment(data) {\n    return Comment.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelement\n  createElement(localName, options) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    let isValue = null;\n    if (options && options.is !== undefined) {\n      isValue = options.is;\n    }\n\n    const namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\n\n    return createElement(this, localName, namespace, null, isValue, true);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelementns\n  createElementNS(namespace, qualifiedName, options) {\n    return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\n  }\n\n  createDocumentFragment() {\n    return DocumentFragment.createImpl(this._globalObject, [], { ownerDocument: this });\n  }\n\n  createAttribute(localName) {\n    validateName(this._globalObject, localName);\n\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n\n    return this._createAttribute({ localName });\n  }\n\n  createAttributeNS(namespace, name) {\n    if (namespace === undefined) {\n      namespace = null;\n    }\n    namespace = namespace !== null ? String(namespace) : namespace;\n\n    const extracted = validateAndExtract(this._globalObject, namespace, name);\n    return this._createAttribute({\n      namespace: extracted.namespace,\n      namespacePrefix: extracted.prefix,\n      localName: extracted.localName\n    });\n  }\n\n  // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\n  // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\n  _createAttribute({\n    localName,\n    value,\n    namespace,\n    namespacePrefix\n  }) {\n    return generatedAttr.createImpl(this._globalObject, [], {\n      localName,\n      value,\n      namespace,\n      namespacePrefix,\n      ownerDocument: this\n    });\n  }\n\n  createTreeWalker(root, whatToShow, filter) {\n    return TreeWalker.createImpl(this._globalObject, [], { root, whatToShow, filter });\n  }\n\n  createNodeIterator(root, whatToShow, filter) {\n    const nodeIterator = NodeIterator.createImpl(this._globalObject, [], { root, whatToShow, filter });\n\n    if (hasWeakRefs) {\n      this._workingNodeIterators.add(nodeIterator);\n    } else {\n      this._workingNodeIterators.push(nodeIterator);\n      while (this._workingNodeIterators.length > 10) {\n        const toInactivate = this._workingNodeIterators.shift();\n        toInactivate._working = false;\n      }\n    }\n\n    return nodeIterator;\n  }\n\n  importNode(node, deep) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot import a document node\",\n        \"NotSupportedError\"\n      ]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a shadow root\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    return clone(node, this, deep);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-adoptnode\n  adoptNode(node) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a document node\",\n        \"NotSupportedError\"\n      ]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\n        \"Cannot adopt a shadow root\",\n        \"HierarchyRequestError\"\n      ]);\n    }\n\n    this._adoptNode(node);\n\n    return node;\n  }\n\n  // https://dom.spec.whatwg.org/#concept-node-adopt\n  _adoptNode(node) {\n    const newDocument = this;\n    const oldDocument = node._ownerDocument;\n\n    const parent = domSymbolTree.parent(node);\n    if (parent) {\n      parent._remove(node);\n    }\n\n    if (oldDocument !== newDocument) {\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        inclusiveDescendant._ownerDocument = newDocument;\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._ceState === \"custom\") {\n          enqueueCECallbackReaction(inclusiveDescendant, \"adoptedCallback\", [\n            idlUtils.wrapperForImpl(oldDocument),\n            idlUtils.wrapperForImpl(newDocument)\n          ]);\n        }\n      }\n\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._adoptingSteps) {\n          inclusiveDescendant._adoptingSteps(oldDocument);\n        }\n      }\n    }\n  }\n\n  get cookie() {\n    return this._cookieJar.getCookieStringSync(this.URL, { http: false });\n  }\n  set cookie(cookieStr) {\n    cookieStr = String(cookieStr);\n    this._cookieJar.setCookieSync(cookieStr, this.URL, {\n      http: false,\n      ignoreError: true\n    });\n  }\n\n  // The clear(), captureEvents(), and releaseEvents() methods must do nothing\n  clear() {}\n\n  captureEvents() {}\n\n  releaseEvents() {}\n\n  get styleSheets() {\n    if (!this._styleSheets) {\n      this._styleSheets = StyleSheetList.createImpl(this._globalObject);\n    }\n\n    // TODO: each style and link element should register its sheet on creation\n    // and remove it on removal.\n    return this._styleSheets;\n  }\n\n  get hidden() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get visibilityState() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return \"visible\";\n    }\n\n    return \"prerender\";\n  }\n\n  // https://w3c.github.io/selection-api/#extensions-to-document-interface\n  getSelection() {\n    return this._defaultView ? this._defaultView._selection : null;\n  }\n\n  // Needed to ensure that the resulting document has the correct prototype chain:\n  // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\n  _cloneDocument() {\n    const copy = documents.createImpl(\n      this._globalObject,\n      {\n        contentType: this.contentType,\n        encoding: this._encoding,\n        parsingMode: this._parsingMode\n      }\n    );\n\n    copy._URL = this._URL;\n    copy._origin = this._origin;\n    return copy;\n  }\n}\n\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\n\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\n  return listOfElementsWithQualifiedName(qualifiedName, this);\n});\n\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\n});\n\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\n  return listOfElementsWithClassNames(classNames, this);\n});\n\nmodule.exports = {\n  implementation: DocumentImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}