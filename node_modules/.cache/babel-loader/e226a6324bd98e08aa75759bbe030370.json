{"ast":null,"code":"\"use strict\";\n/**\n * Queue for all the resources to be download except async scripts.\n * Async scripts have their own queue AsyncResourceQueue.\n */\n\nmodule.exports = class ResourceQueue {\n  constructor() {\n    let {\n      paused,\n      asyncQueue\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.paused = Boolean(paused);\n    this._asyncQueue = asyncQueue;\n  }\n\n  getLastScript() {\n    let head = this.tail;\n\n    while (head) {\n      if (head.isScript) {\n        return head;\n      }\n\n      head = head.prev;\n    }\n\n    return null;\n  }\n\n  _moreScripts() {\n    let found = false;\n    let head = this.tail;\n\n    while (head && !found) {\n      found = head.isScript;\n      head = head.prev;\n    }\n\n    return found;\n  }\n\n  _notify() {\n    if (this._listener) {\n      this._listener();\n    }\n  }\n\n  setListener(listener) {\n    this._listener = listener;\n  }\n\n  push(request, onLoad, onError, keepLast, element) {\n    const isScript = element ? element.localName === \"script\" : false;\n\n    if (!request) {\n      if (isScript && !this._moreScripts()) {\n        return onLoad();\n      }\n\n      request = Promise.resolve();\n    }\n\n    const q = this;\n    const item = {\n      isScript,\n      err: null,\n      element,\n      fired: false,\n      data: null,\n      keepLast,\n      prev: q.tail,\n\n      check() {\n        if (!q.paused && !this.prev && this.fired) {\n          let promise;\n\n          if (this.err && onError) {\n            promise = onError(this.err);\n          }\n\n          if (!this.err && onLoad) {\n            promise = onLoad(this.data);\n          }\n\n          Promise.resolve(promise).then(() => {\n            if (this.next) {\n              this.next.prev = null;\n              this.next.check();\n            } else {\n              // q.tail===this\n              q.tail = null;\n\n              q._notify();\n            }\n\n            this.finished = true;\n\n            if (q._asyncQueue) {\n              q._asyncQueue.notifyItem(this);\n            }\n          });\n        }\n      }\n\n    };\n\n    if (q.tail) {\n      if (q.tail.keepLast) {\n        // if the tail is the load event in document and we receive a new element to load\n        // we should add this new request before the load event.\n        if (q.tail.prev) {\n          q.tail.prev.next = item;\n        }\n\n        item.prev = q.tail.prev;\n        q.tail.prev = item;\n        item.next = q.tail;\n      } else {\n        q.tail.next = item;\n        q.tail = item;\n      }\n    } else {\n      q.tail = item;\n    }\n\n    return request.then(data => {\n      item.fired = 1;\n      item.data = data;\n      item.check();\n    }).catch(err => {\n      item.fired = true;\n      item.err = err;\n      item.check();\n    });\n  }\n\n  resume() {\n    if (!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n    let head = this.tail;\n\n    while (head && head.prev) {\n      head = head.prev;\n    }\n\n    if (head) {\n      head.check();\n    }\n  }\n\n};","map":{"version":3,"names":["module","exports","ResourceQueue","constructor","paused","asyncQueue","Boolean","_asyncQueue","getLastScript","head","tail","isScript","prev","_moreScripts","found","_notify","_listener","setListener","listener","push","request","onLoad","onError","keepLast","element","localName","Promise","resolve","q","item","err","fired","data","check","promise","then","next","finished","notifyItem","catch","resume"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/browser/resources/resource-queue.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Queue for all the resources to be download except async scripts.\n * Async scripts have their own queue AsyncResourceQueue.\n */\nmodule.exports = class ResourceQueue {\n  constructor({ paused, asyncQueue } = {}) {\n    this.paused = Boolean(paused);\n    this._asyncQueue = asyncQueue;\n  }\n\n  getLastScript() {\n    let head = this.tail;\n\n    while (head) {\n      if (head.isScript) {\n        return head;\n      }\n      head = head.prev;\n    }\n\n    return null;\n  }\n\n  _moreScripts() {\n    let found = false;\n\n    let head = this.tail;\n    while (head && !found) {\n      found = head.isScript;\n      head = head.prev;\n    }\n\n    return found;\n  }\n\n  _notify() {\n    if (this._listener) {\n      this._listener();\n    }\n  }\n\n  setListener(listener) {\n    this._listener = listener;\n  }\n\n  push(request, onLoad, onError, keepLast, element) {\n    const isScript = element ? element.localName === \"script\" : false;\n\n    if (!request) {\n      if (isScript && !this._moreScripts()) {\n        return onLoad();\n      }\n\n      request = Promise.resolve();\n    }\n    const q = this;\n    const item = {\n      isScript,\n      err: null,\n      element,\n      fired: false,\n      data: null,\n      keepLast,\n      prev: q.tail,\n      check() {\n        if (!q.paused && !this.prev && this.fired) {\n          let promise;\n\n          if (this.err && onError) {\n            promise = onError(this.err);\n          }\n\n          if (!this.err && onLoad) {\n            promise = onLoad(this.data);\n          }\n\n          Promise.resolve(promise)\n            .then(() => {\n              if (this.next) {\n                this.next.prev = null;\n                this.next.check();\n              } else { // q.tail===this\n                q.tail = null;\n                q._notify();\n              }\n\n              this.finished = true;\n\n              if (q._asyncQueue) {\n                q._asyncQueue.notifyItem(this);\n              }\n            });\n        }\n      }\n    };\n    if (q.tail) {\n      if (q.tail.keepLast) {\n        // if the tail is the load event in document and we receive a new element to load\n        // we should add this new request before the load event.\n        if (q.tail.prev) {\n          q.tail.prev.next = item;\n        }\n        item.prev = q.tail.prev;\n        q.tail.prev = item;\n        item.next = q.tail;\n      } else {\n        q.tail.next = item;\n        q.tail = item;\n      }\n    } else {\n      q.tail = item;\n    }\n    return request\n      .then(data => {\n        item.fired = 1;\n        item.data = data;\n        item.check();\n      })\n      .catch(err => {\n        item.fired = true;\n        item.err = err;\n        item.check();\n      });\n  }\n\n  resume() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n\n    let head = this.tail;\n    while (head && head.prev) {\n      head = head.prev;\n    }\n    if (head) {\n      head.check();\n    }\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}