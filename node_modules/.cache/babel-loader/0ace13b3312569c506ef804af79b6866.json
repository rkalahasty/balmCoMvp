{"ast":null,"code":"\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst EventInit = require(\"../generated/EventInit\");\n\nclass EventImpl {\n  constructor(globalObject, args, privateData) {\n    const [type, eventInitDict = this.constructor.defaultInit] = args;\n    this.type = type;\n    this.bubbles = false;\n    this.cancelable = false;\n\n    for (const key in eventInitDict) {\n      if (key in this.constructor.defaultInit) {\n        this[key] = eventInitDict[key];\n      }\n    }\n\n    for (const key in this.constructor.defaultInit) {\n      if (!(key in this)) {\n        this[key] = this.constructor.defaultInit[key];\n      }\n    }\n\n    this.target = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n    this._globalObject = globalObject;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this._inPassiveListenerFlag = false;\n    this._dispatchFlag = false;\n    this._path = [];\n    this.isTrusted = privateData.isTrusted || false;\n    this.timeStamp = Date.now();\n  } // https://dom.spec.whatwg.org/#set-the-canceled-flag\n\n\n  _setTheCanceledFlag() {\n    if (this.cancelable && !this._inPassiveListenerFlag) {\n      this._canceledFlag = true;\n    }\n  }\n\n  get srcElement() {\n    return this.target;\n  }\n\n  get returnValue() {\n    return !this._canceledFlag;\n  }\n\n  set returnValue(v) {\n    if (v === false) {\n      this._setTheCanceledFlag();\n    }\n  }\n\n  get defaultPrevented() {\n    return this._canceledFlag;\n  }\n\n  stopPropagation() {\n    this._stopPropagationFlag = true;\n  }\n\n  get cancelBubble() {\n    return this._stopPropagationFlag;\n  }\n\n  set cancelBubble(v) {\n    if (v) {\n      this._stopPropagationFlag = true;\n    }\n  }\n\n  stopImmediatePropagation() {\n    this._stopPropagationFlag = true;\n    this._stopImmediatePropagationFlag = true;\n  }\n\n  preventDefault() {\n    this._setTheCanceledFlag();\n  } // https://dom.spec.whatwg.org/#dom-event-composedpath\n  // Current implementation is based of https://whatpr.org/dom/699.html#dom-event-composedpath\n  // due to a bug in composed path implementation https://github.com/whatwg/dom/issues/684\n\n\n  composedPath() {\n    const composedPath = [];\n    const {\n      currentTarget,\n      _path: path\n    } = this;\n\n    if (path.length === 0) {\n      return composedPath;\n    }\n\n    composedPath.push(currentTarget);\n    let currentTargetIndex = 0;\n    let currentTargetHiddenSubtreeLevel = 0;\n\n    for (let index = path.length - 1; index >= 0; index--) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[index];\n\n      if (rootOfClosedTree) {\n        currentTargetHiddenSubtreeLevel++;\n      }\n\n      if (item === idlUtils.implForWrapper(currentTarget)) {\n        currentTargetIndex = index;\n        break;\n      }\n\n      if (slotInClosedTree) {\n        currentTargetHiddenSubtreeLevel--;\n      }\n    }\n\n    let currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    let maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let i = currentTargetIndex - 1; i >= 0; i--) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[i];\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.unshift(idlUtils.wrapperForImpl(item));\n      }\n\n      if (slotInClosedTree) {\n        currentHiddenLevel--;\n\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let index = currentTargetIndex + 1; index < path.length; index++) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[index];\n\n      if (slotInClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.push(idlUtils.wrapperForImpl(item));\n      }\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel--;\n\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    return composedPath;\n  }\n\n  _initialize(type, bubbles, cancelable) {\n    this.type = type;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this.isTrusted = false;\n    this.target = null;\n    this.bubbles = bubbles;\n    this.cancelable = cancelable;\n  }\n\n  initEvent(type, bubbles, cancelable) {\n    if (this._dispatchFlag) {\n      return;\n    }\n\n    this._initialize(type, bubbles, cancelable);\n  }\n\n}\n\nEventImpl.defaultInit = EventInit.convert(undefined);\nmodule.exports = {\n  implementation: EventImpl\n};","map":{"version":3,"names":["idlUtils","require","EventInit","EventImpl","constructor","globalObject","args","privateData","type","eventInitDict","defaultInit","bubbles","cancelable","key","target","currentTarget","eventPhase","_globalObject","_initializedFlag","_stopPropagationFlag","_stopImmediatePropagationFlag","_canceledFlag","_inPassiveListenerFlag","_dispatchFlag","_path","isTrusted","timeStamp","Date","now","_setTheCanceledFlag","srcElement","returnValue","v","defaultPrevented","stopPropagation","cancelBubble","stopImmediatePropagation","preventDefault","composedPath","path","length","push","currentTargetIndex","currentTargetHiddenSubtreeLevel","index","item","rootOfClosedTree","slotInClosedTree","implForWrapper","currentHiddenLevel","maxHiddenLevel","i","unshift","wrapperForImpl","_initialize","initEvent","convert","undefined","module","exports","implementation"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/events/Event-impl.js"],"sourcesContent":["\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\nconst EventInit = require(\"../generated/EventInit\");\n\nclass EventImpl {\n  constructor(globalObject, args, privateData) {\n    const [type, eventInitDict = this.constructor.defaultInit] = args;\n\n    this.type = type;\n\n    this.bubbles = false;\n    this.cancelable = false;\n    for (const key in eventInitDict) {\n      if (key in this.constructor.defaultInit) {\n        this[key] = eventInitDict[key];\n      }\n    }\n    for (const key in this.constructor.defaultInit) {\n      if (!(key in this)) {\n        this[key] = this.constructor.defaultInit[key];\n      }\n    }\n\n    this.target = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n\n    this._globalObject = globalObject;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this._inPassiveListenerFlag = false;\n    this._dispatchFlag = false;\n    this._path = [];\n\n    this.isTrusted = privateData.isTrusted || false;\n    this.timeStamp = Date.now();\n  }\n\n  // https://dom.spec.whatwg.org/#set-the-canceled-flag\n  _setTheCanceledFlag() {\n    if (this.cancelable && !this._inPassiveListenerFlag) {\n      this._canceledFlag = true;\n    }\n  }\n\n  get srcElement() {\n    return this.target;\n  }\n\n  get returnValue() {\n    return !this._canceledFlag;\n  }\n\n  set returnValue(v) {\n    if (v === false) {\n      this._setTheCanceledFlag();\n    }\n  }\n\n  get defaultPrevented() {\n    return this._canceledFlag;\n  }\n\n  stopPropagation() {\n    this._stopPropagationFlag = true;\n  }\n\n  get cancelBubble() {\n    return this._stopPropagationFlag;\n  }\n\n  set cancelBubble(v) {\n    if (v) {\n      this._stopPropagationFlag = true;\n    }\n  }\n\n  stopImmediatePropagation() {\n    this._stopPropagationFlag = true;\n    this._stopImmediatePropagationFlag = true;\n  }\n\n  preventDefault() {\n    this._setTheCanceledFlag();\n  }\n\n  // https://dom.spec.whatwg.org/#dom-event-composedpath\n  // Current implementation is based of https://whatpr.org/dom/699.html#dom-event-composedpath\n  // due to a bug in composed path implementation https://github.com/whatwg/dom/issues/684\n  composedPath() {\n    const composedPath = [];\n\n    const { currentTarget, _path: path } = this;\n\n    if (path.length === 0) {\n      return composedPath;\n    }\n\n    composedPath.push(currentTarget);\n\n    let currentTargetIndex = 0;\n    let currentTargetHiddenSubtreeLevel = 0;\n\n    for (let index = path.length - 1; index >= 0; index--) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[index];\n\n      if (rootOfClosedTree) {\n        currentTargetHiddenSubtreeLevel++;\n      }\n\n      if (item === idlUtils.implForWrapper(currentTarget)) {\n        currentTargetIndex = index;\n        break;\n      }\n\n      if (slotInClosedTree) {\n        currentTargetHiddenSubtreeLevel--;\n      }\n    }\n\n    let currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    let maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let i = currentTargetIndex - 1; i >= 0; i--) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[i];\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.unshift(idlUtils.wrapperForImpl(item));\n      }\n\n      if (slotInClosedTree) {\n        currentHiddenLevel--;\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let index = currentTargetIndex + 1; index < path.length; index++) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[index];\n\n      if (slotInClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.push(idlUtils.wrapperForImpl(item));\n      }\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel--;\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    return composedPath;\n  }\n\n  _initialize(type, bubbles, cancelable) {\n    this.type = type;\n    this._initializedFlag = true;\n\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n\n    this.isTrusted = false;\n    this.target = null;\n    this.bubbles = bubbles;\n    this.cancelable = cancelable;\n  }\n\n  initEvent(type, bubbles, cancelable) {\n    if (this._dispatchFlag) {\n      return;\n    }\n\n    this._initialize(type, bubbles, cancelable);\n  }\n}\nEventImpl.defaultInit = EventInit.convert(undefined);\n\nmodule.exports = {\n  implementation: EventImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}