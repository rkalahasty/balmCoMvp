{"ast":null,"code":"\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\n\nconst {\n  isSummaryForParentDetails\n} = require(\"../helpers/details\");\n\nconst focusing = require(\"../helpers/focusing\");\n\nconst {\n  HTML_NS,\n  SVG_NS\n} = require(\"../helpers/namespaces\");\n\nconst DOMStringMap = require(\"../generated/DOMStringMap\");\n\nconst tabIndexReflectAllowedHTMLElements = new Set([\"a\", \"area\", \"button\", \"frame\", \"iframe\", \"input\", \"object\", \"select\", \"textarea\"]);\n\nclass HTMLOrSVGElementImpl {\n  _initHTMLOrSVGElement() {\n    this._tabIndex = 0;\n    this._dataset = DOMStringMap.createImpl(this._globalObject, [], {\n      element: this\n    });\n  }\n\n  get dataset() {\n    return this._dataset;\n  } // TODO this should be [Reflect]able if we added default value support to webidl2js's [Reflect]\n\n\n  get tabIndex() {\n    if (!this.hasAttributeNS(null, \"tabindex\")) {\n      if (this.namespaceURI === HTML_NS && (tabIndexReflectAllowedHTMLElements.has(this._localName) || this._localName === \"summary\" && isSummaryForParentDetails(this)) || this.namespaceURI === SVG_NS && this._localName === \"a\") {\n        return 0;\n      }\n\n      return -1;\n    }\n\n    return conversions.long(this.getAttributeNS(null, \"tabindex\"));\n  }\n\n  set tabIndex(value) {\n    this.setAttributeNS(null, \"tabindex\", String(value));\n  }\n\n  focus() {\n    if (!focusing.isFocusableAreaElement(this)) {\n      return;\n    }\n\n    const ownerDocument = this._ownerDocument;\n    const previous = ownerDocument._lastFocusedElement;\n\n    if (previous === this) {\n      return;\n    }\n\n    ownerDocument._lastFocusedElement = null;\n\n    if (previous) {\n      focusing.fireFocusEventWithTargetAdjustment(\"blur\", previous, this);\n      focusing.fireFocusEventWithTargetAdjustment(\"focusout\", previous, this, {\n        bubbles: true\n      });\n    } else {\n      const frameElement = ownerDocument._defaultView._frameElement;\n\n      if (frameElement) {\n        const frameLastFocusedElement = frameElement.ownerDocument._lastFocusedElement;\n        frameElement.ownerDocument._lastFocusedElement = null;\n        focusing.fireFocusEventWithTargetAdjustment(\"blur\", frameLastFocusedElement, null);\n        focusing.fireFocusEventWithTargetAdjustment(\"focusout\", frameLastFocusedElement, null, {\n          bubbles: true\n        });\n        frameElement.ownerDocument._lastFocusedElement = frameElement;\n      }\n    }\n\n    ownerDocument._lastFocusedElement = this;\n    focusing.fireFocusEventWithTargetAdjustment(\"focus\", this, previous);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusin\", this, previous, {\n      bubbles: true\n    });\n  }\n\n  blur() {\n    if (this._ownerDocument._lastFocusedElement !== this || !focusing.isFocusableAreaElement(this)) {\n      return;\n    }\n\n    this._ownerDocument._lastFocusedElement = null;\n    focusing.fireFocusEventWithTargetAdjustment(\"blur\", this, this._ownerDocument);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusout\", this, this._ownerDocument, {\n      bubbles: true\n    });\n    focusing.fireFocusEventWithTargetAdjustment(\"focus\", this._ownerDocument, this);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusin\", this._ownerDocument, this, {\n      bubbles: true\n    });\n  }\n\n}\n\nexports.implementation = HTMLOrSVGElementImpl;","map":{"version":3,"names":["conversions","require","isSummaryForParentDetails","focusing","HTML_NS","SVG_NS","DOMStringMap","tabIndexReflectAllowedHTMLElements","Set","HTMLOrSVGElementImpl","_initHTMLOrSVGElement","_tabIndex","_dataset","createImpl","_globalObject","element","dataset","tabIndex","hasAttributeNS","namespaceURI","has","_localName","long","getAttributeNS","value","setAttributeNS","String","focus","isFocusableAreaElement","ownerDocument","_ownerDocument","previous","_lastFocusedElement","fireFocusEventWithTargetAdjustment","bubbles","frameElement","_defaultView","_frameElement","frameLastFocusedElement","blur","exports","implementation"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/nodes/HTMLOrSVGElement-impl.js"],"sourcesContent":["\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst { isSummaryForParentDetails } = require(\"../helpers/details\");\nconst focusing = require(\"../helpers/focusing\");\nconst { HTML_NS, SVG_NS } = require(\"../helpers/namespaces\");\nconst DOMStringMap = require(\"../generated/DOMStringMap\");\n\nconst tabIndexReflectAllowedHTMLElements = new Set([\n  \"a\", \"area\", \"button\", \"frame\", \"iframe\",\n  \"input\", \"object\", \"select\", \"textarea\"\n]);\n\nclass HTMLOrSVGElementImpl {\n  _initHTMLOrSVGElement() {\n    this._tabIndex = 0;\n    this._dataset = DOMStringMap.createImpl(this._globalObject, [], { element: this });\n  }\n\n  get dataset() {\n    return this._dataset;\n  }\n\n  // TODO this should be [Reflect]able if we added default value support to webidl2js's [Reflect]\n  get tabIndex() {\n    if (!this.hasAttributeNS(null, \"tabindex\")) {\n      if ((this.namespaceURI === HTML_NS && (tabIndexReflectAllowedHTMLElements.has(this._localName) ||\n                                             (this._localName === \"summary\" && isSummaryForParentDetails(this)))) ||\n          (this.namespaceURI === SVG_NS && this._localName === \"a\")) {\n        return 0;\n      }\n      return -1;\n    }\n    return conversions.long(this.getAttributeNS(null, \"tabindex\"));\n  }\n\n  set tabIndex(value) {\n    this.setAttributeNS(null, \"tabindex\", String(value));\n  }\n\n  focus() {\n    if (!focusing.isFocusableAreaElement(this)) {\n      return;\n    }\n    const ownerDocument = this._ownerDocument;\n    const previous = ownerDocument._lastFocusedElement;\n\n    if (previous === this) {\n      return;\n    }\n\n    ownerDocument._lastFocusedElement = null;\n    if (previous) {\n      focusing.fireFocusEventWithTargetAdjustment(\"blur\", previous, this);\n      focusing.fireFocusEventWithTargetAdjustment(\"focusout\", previous, this, { bubbles: true });\n    } else {\n      const frameElement = ownerDocument._defaultView._frameElement;\n      if (frameElement) {\n        const frameLastFocusedElement = frameElement.ownerDocument._lastFocusedElement;\n        frameElement.ownerDocument._lastFocusedElement = null;\n        focusing.fireFocusEventWithTargetAdjustment(\"blur\", frameLastFocusedElement, null);\n        focusing.fireFocusEventWithTargetAdjustment(\"focusout\", frameLastFocusedElement, null, { bubbles: true });\n        frameElement.ownerDocument._lastFocusedElement = frameElement;\n      }\n    }\n\n    ownerDocument._lastFocusedElement = this;\n    focusing.fireFocusEventWithTargetAdjustment(\"focus\", this, previous);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusin\", this, previous, { bubbles: true });\n  }\n\n  blur() {\n    if (this._ownerDocument._lastFocusedElement !== this || !focusing.isFocusableAreaElement(this)) {\n      return;\n    }\n\n    this._ownerDocument._lastFocusedElement = null;\n    focusing.fireFocusEventWithTargetAdjustment(\"blur\", this, this._ownerDocument);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusout\", this, this._ownerDocument, { bubbles: true });\n    focusing.fireFocusEventWithTargetAdjustment(\"focus\", this._ownerDocument, this);\n    focusing.fireFocusEventWithTargetAdjustment(\"focusin\", this._ownerDocument, this, { bubbles: true });\n  }\n}\n\nexports.implementation = HTMLOrSVGElementImpl;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}