{"ast":null,"code":"\"use strict\";\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst {\n  mixin\n} = require(\"../../utils\");\n\nconst NodeImpl = require(\"./Node-impl\").implementation;\n\nconst ChildNodeImpl = require(\"./ChildNode-impl\").implementation;\n\nconst NonDocumentTypeChildNodeImpl = require(\"./NonDocumentTypeChildNode-impl\").implementation;\n\nconst {\n  TEXT_NODE\n} = require(\"../node-type\");\n\nconst {\n  MUTATION_TYPE,\n  queueMutationRecord\n} = require(\"../helpers/mutation-observers\"); // https://dom.spec.whatwg.org/#characterdata\n\n\nclass CharacterDataImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this._data = privateData.data;\n  } // https://dom.spec.whatwg.org/#dom-characterdata-data\n\n\n  get data() {\n    return this._data;\n  }\n\n  set data(data) {\n    this.replaceData(0, this.length, data);\n  } // https://dom.spec.whatwg.org/#dom-characterdata-length\n\n\n  get length() {\n    return this._data.length;\n  } // https://dom.spec.whatwg.org/#dom-characterdata-substringdata\n  // https://dom.spec.whatwg.org/#concept-cd-substring\n\n\n  substringData(offset, count) {\n    const {\n      length\n    } = this;\n\n    if (offset > length) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n\n    if (offset + count > length) {\n      return this._data.slice(offset);\n    }\n\n    return this._data.slice(offset, offset + count);\n  } // https://dom.spec.whatwg.org/#dom-characterdata-appenddata\n\n\n  appendData(data) {\n    this.replaceData(this.length, 0, data);\n  } // https://dom.spec.whatwg.org/#dom-characterdata-insertdata\n\n\n  insertData(offset, data) {\n    this.replaceData(offset, 0, data);\n  } // https://dom.spec.whatwg.org/#dom-characterdata-deletedata\n\n\n  deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  } // https://dom.spec.whatwg.org/#dom-characterdata-replacedata\n  // https://dom.spec.whatwg.org/#concept-cd-replace\n\n\n  replaceData(offset, count, data) {\n    const {\n      length\n    } = this;\n\n    if (offset > length) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n\n    if (offset + count > length) {\n      count = length - offset;\n    }\n\n    queueMutationRecord(MUTATION_TYPE.CHARACTER_DATA, this, null, null, this._data, [], [], null, null);\n\n    const start = this._data.slice(0, offset);\n\n    const end = this._data.slice(offset + count);\n\n    this._data = start + data + end;\n\n    for (const range of this._referencedRanges) {\n      const {\n        _start,\n        _end\n      } = range;\n\n      if (_start.offset > offset && _start.offset <= offset + count) {\n        range._setLiveRangeStart(this, offset);\n      }\n\n      if (_end.offset > offset && _end.offset <= offset + count) {\n        range._setLiveRangeEnd(this, offset);\n      }\n\n      if (_start.offset > offset + count) {\n        range._setLiveRangeStart(this, _start.offset + data.length - count);\n      }\n\n      if (_end.offset > offset + count) {\n        range._setLiveRangeEnd(this, _end.offset + data.length - count);\n      }\n    }\n\n    if (this.nodeType === TEXT_NODE && this.parentNode) {\n      this.parentNode._childTextContentChangeSteps();\n    }\n  }\n\n}\n\nmixin(CharacterDataImpl.prototype, NonDocumentTypeChildNodeImpl.prototype);\nmixin(CharacterDataImpl.prototype, ChildNodeImpl.prototype);\nmodule.exports = {\n  implementation: CharacterDataImpl\n};","map":{"version":3,"names":["DOMException","require","mixin","NodeImpl","implementation","ChildNodeImpl","NonDocumentTypeChildNodeImpl","TEXT_NODE","MUTATION_TYPE","queueMutationRecord","CharacterDataImpl","constructor","globalObject","args","privateData","_data","data","replaceData","length","substringData","offset","count","create","_globalObject","slice","appendData","insertData","deleteData","CHARACTER_DATA","start","end","range","_referencedRanges","_start","_end","_setLiveRangeStart","_setLiveRangeEnd","nodeType","parentNode","_childTextContentChangeSteps","prototype","module","exports"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/nodes/CharacterData-impl.js"],"sourcesContent":["\"use strict\";\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst { mixin } = require(\"../../utils\");\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst ChildNodeImpl = require(\"./ChildNode-impl\").implementation;\nconst NonDocumentTypeChildNodeImpl = require(\"./NonDocumentTypeChildNode-impl\").implementation;\n\nconst { TEXT_NODE } = require(\"../node-type\");\nconst { MUTATION_TYPE, queueMutationRecord } = require(\"../helpers/mutation-observers\");\n\n// https://dom.spec.whatwg.org/#characterdata\nclass CharacterDataImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n\n    this._data = privateData.data;\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-data\n  get data() {\n    return this._data;\n  }\n  set data(data) {\n    this.replaceData(0, this.length, data);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-length\n  get length() {\n    return this._data.length;\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-substringdata\n  // https://dom.spec.whatwg.org/#concept-cd-substring\n  substringData(offset, count) {\n    const { length } = this;\n\n    if (offset > length) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n\n    if (offset + count > length) {\n      return this._data.slice(offset);\n    }\n\n    return this._data.slice(offset, offset + count);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-appenddata\n  appendData(data) {\n    this.replaceData(this.length, 0, data);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-insertdata\n  insertData(offset, data) {\n    this.replaceData(offset, 0, data);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-deletedata\n  deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  }\n\n  // https://dom.spec.whatwg.org/#dom-characterdata-replacedata\n  // https://dom.spec.whatwg.org/#concept-cd-replace\n  replaceData(offset, count, data) {\n    const { length } = this;\n\n    if (offset > length) {\n      throw DOMException.create(this._globalObject, [\n        \"The index is not in the allowed range.\",\n        \"IndexSizeError\"\n      ]);\n    }\n\n    if (offset + count > length) {\n      count = length - offset;\n    }\n\n    queueMutationRecord(MUTATION_TYPE.CHARACTER_DATA, this, null, null, this._data, [], [], null, null);\n\n    const start = this._data.slice(0, offset);\n    const end = this._data.slice(offset + count);\n    this._data = start + data + end;\n\n    for (const range of this._referencedRanges) {\n      const { _start, _end } = range;\n\n      if (_start.offset > offset && _start.offset <= offset + count) {\n        range._setLiveRangeStart(this, offset);\n      }\n\n      if (_end.offset > offset && _end.offset <= offset + count) {\n        range._setLiveRangeEnd(this, offset);\n      }\n\n      if (_start.offset > offset + count) {\n        range._setLiveRangeStart(this, _start.offset + data.length - count);\n      }\n\n      if (_end.offset > offset + count) {\n        range._setLiveRangeEnd(this, _end.offset + data.length - count);\n      }\n    }\n\n    if (this.nodeType === TEXT_NODE && this.parentNode) {\n      this.parentNode._childTextContentChangeSteps();\n    }\n  }\n}\n\nmixin(CharacterDataImpl.prototype, NonDocumentTypeChildNodeImpl.prototype);\nmixin(CharacterDataImpl.prototype, ChildNodeImpl.prototype);\n\nmodule.exports = {\n  implementation: CharacterDataImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}