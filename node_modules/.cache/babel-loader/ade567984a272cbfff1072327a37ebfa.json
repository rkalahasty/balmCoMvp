{"ast":null,"code":"/*********************************************************************\n * These are commonly used parsers for CSS Values they take a string *\n * to parse and return a string after it's been converted, if needed *\n ********************************************************************/\n'use strict';\n\nconst namedColors = require('./named_colors.json');\n\nconst {\n  hslToRgb\n} = require('./utils/colorSpace');\n\nexports.TYPES = {\n  INTEGER: 1,\n  NUMBER: 2,\n  LENGTH: 3,\n  PERCENT: 4,\n  URL: 5,\n  COLOR: 6,\n  STRING: 7,\n  ANGLE: 8,\n  KEYWORD: 9,\n  NULL_OR_EMPTY_STR: 10,\n  CALC: 11\n}; // rough regular expressions\n\nvar integerRegEx = /^[-+]?[0-9]+$/;\nvar numberRegEx = /^[-+]?[0-9]*\\.?[0-9]+$/;\nvar lengthRegEx = /^(0|[-+]?[0-9]*\\.?[0-9]+(in|cm|em|mm|pt|pc|px|ex|rem|vh|vw|ch))$/;\nvar percentRegEx = /^[-+]?[0-9]*\\.?[0-9]+%$/;\nvar urlRegEx = /^url\\(\\s*([^)]*)\\s*\\)$/;\nvar stringRegEx = /^(\"[^\"]*\"|'[^']*')$/;\nvar colorRegEx1 = /^#([0-9a-fA-F]{3,4}){1,2}$/;\nvar colorRegEx2 = /^rgb\\(([^)]*)\\)$/;\nvar colorRegEx3 = /^rgba\\(([^)]*)\\)$/;\nvar calcRegEx = /^calc\\(([^)]*)\\)$/;\nvar colorRegEx4 = /^hsla?\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*(,\\s*(-?\\d+|-?\\d*.\\d+)\\s*)?\\)/;\nvar angleRegEx = /^([-+]?[0-9]*\\.?[0-9]+)(deg|grad|rad)$/; // This will return one of the above types based on the passed in string\n\nexports.valueType = function valueType(val) {\n  if (val === '' || val === null) {\n    return exports.TYPES.NULL_OR_EMPTY_STR;\n  }\n\n  if (typeof val === 'number') {\n    val = val.toString();\n  }\n\n  if (typeof val !== 'string') {\n    return undefined;\n  }\n\n  if (integerRegEx.test(val)) {\n    return exports.TYPES.INTEGER;\n  }\n\n  if (numberRegEx.test(val)) {\n    return exports.TYPES.NUMBER;\n  }\n\n  if (lengthRegEx.test(val)) {\n    return exports.TYPES.LENGTH;\n  }\n\n  if (percentRegEx.test(val)) {\n    return exports.TYPES.PERCENT;\n  }\n\n  if (urlRegEx.test(val)) {\n    return exports.TYPES.URL;\n  }\n\n  if (calcRegEx.test(val)) {\n    return exports.TYPES.CALC;\n  }\n\n  if (stringRegEx.test(val)) {\n    return exports.TYPES.STRING;\n  }\n\n  if (angleRegEx.test(val)) {\n    return exports.TYPES.ANGLE;\n  }\n\n  if (colorRegEx1.test(val)) {\n    return exports.TYPES.COLOR;\n  }\n\n  var res = colorRegEx2.exec(val);\n  var parts;\n\n  if (res !== null) {\n    parts = res[1].split(/\\s*,\\s*/);\n\n    if (parts.length !== 3) {\n      return undefined;\n    }\n\n    if (parts.every(percentRegEx.test.bind(percentRegEx)) || parts.every(integerRegEx.test.bind(integerRegEx))) {\n      return exports.TYPES.COLOR;\n    }\n\n    return undefined;\n  }\n\n  res = colorRegEx3.exec(val);\n\n  if (res !== null) {\n    parts = res[1].split(/\\s*,\\s*/);\n\n    if (parts.length !== 4) {\n      return undefined;\n    }\n\n    if (parts.slice(0, 3).every(percentRegEx.test.bind(percentRegEx)) || parts.slice(0, 3).every(integerRegEx.test.bind(integerRegEx))) {\n      if (numberRegEx.test(parts[3])) {\n        return exports.TYPES.COLOR;\n      }\n    }\n\n    return undefined;\n  }\n\n  if (colorRegEx4.test(val)) {\n    return exports.TYPES.COLOR;\n  } // could still be a color, one of the standard keyword colors\n\n\n  val = val.toLowerCase();\n\n  if (namedColors.includes(val)) {\n    return exports.TYPES.COLOR;\n  }\n\n  switch (val) {\n    // the following are deprecated in CSS3\n    case 'activeborder':\n    case 'activecaption':\n    case 'appworkspace':\n    case 'background':\n    case 'buttonface':\n    case 'buttonhighlight':\n    case 'buttonshadow':\n    case 'buttontext':\n    case 'captiontext':\n    case 'graytext':\n    case 'highlight':\n    case 'highlighttext':\n    case 'inactiveborder':\n    case 'inactivecaption':\n    case 'inactivecaptiontext':\n    case 'infobackground':\n    case 'infotext':\n    case 'menu':\n    case 'menutext':\n    case 'scrollbar':\n    case 'threeddarkshadow':\n    case 'threedface':\n    case 'threedhighlight':\n    case 'threedlightshadow':\n    case 'threedshadow':\n    case 'window':\n    case 'windowframe':\n    case 'windowtext':\n      return exports.TYPES.COLOR;\n\n    default:\n      return exports.TYPES.KEYWORD;\n  }\n};\n\nexports.parseInteger = function parseInteger(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.INTEGER) {\n    return undefined;\n  }\n\n  return String(parseInt(val, 10));\n};\n\nexports.parseNumber = function parseNumber(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.NUMBER && type !== exports.TYPES.INTEGER) {\n    return undefined;\n  }\n\n  return String(parseFloat(val));\n};\n\nexports.parseLength = function parseLength(val) {\n  if (val === 0 || val === '0') {\n    return '0px';\n  }\n\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.LENGTH) {\n    return undefined;\n  }\n\n  return val;\n};\n\nexports.parsePercent = function parsePercent(val) {\n  if (val === 0 || val === '0') {\n    return '0%';\n  }\n\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.PERCENT) {\n    return undefined;\n  }\n\n  return val;\n}; // either a length or a percent\n\n\nexports.parseMeasurement = function parseMeasurement(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.CALC) {\n    return val;\n  }\n\n  var length = exports.parseLength(val);\n\n  if (length !== undefined) {\n    return length;\n  }\n\n  return exports.parsePercent(val);\n};\n\nexports.parseUrl = function parseUrl(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  var res = urlRegEx.exec(val); // does it match the regex?\n\n  if (!res) {\n    return undefined;\n  }\n\n  var str = res[1]; // if it starts with single or double quotes, does it end with the same?\n\n  if ((str[0] === '\"' || str[0] === \"'\") && str[0] !== str[str.length - 1]) {\n    return undefined;\n  }\n\n  if (str[0] === '\"' || str[0] === \"'\") {\n    str = str.substr(1, str.length - 2);\n  }\n\n  var i;\n\n  for (i = 0; i < str.length; i++) {\n    switch (str[i]) {\n      case '(':\n      case ')':\n      case ' ':\n      case '\\t':\n      case '\\n':\n      case \"'\":\n      case '\"':\n        return undefined;\n\n      case '\\\\':\n        i++;\n        break;\n    }\n  }\n\n  return 'url(' + str + ')';\n};\n\nexports.parseString = function parseString(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.STRING) {\n    return undefined;\n  }\n\n  var i;\n\n  for (i = 1; i < val.length - 1; i++) {\n    switch (val[i]) {\n      case val[0]:\n        return undefined;\n\n      case '\\\\':\n        i++;\n\n        while (i < val.length - 1 && /[0-9A-Fa-f]/.test(val[i])) {\n          i++;\n        }\n\n        break;\n    }\n  }\n\n  if (i >= val.length) {\n    return undefined;\n  }\n\n  return val;\n};\n\nexports.parseColor = function parseColor(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  var red,\n      green,\n      blue,\n      hue,\n      saturation,\n      lightness,\n      alpha = 1;\n  var parts;\n  var res = colorRegEx1.exec(val); // is it #aaa, #ababab, #aaaa, #abababaa\n\n  if (res) {\n    var defaultHex = val.substr(1);\n    var hex = val.substr(1);\n\n    if (hex.length === 3 || hex.length === 4) {\n      hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n\n      if (defaultHex.length === 4) {\n        hex = hex + defaultHex[3] + defaultHex[3];\n      }\n    }\n\n    red = parseInt(hex.substr(0, 2), 16);\n    green = parseInt(hex.substr(2, 2), 16);\n    blue = parseInt(hex.substr(4, 2), 16);\n\n    if (hex.length === 8) {\n      var hexAlpha = hex.substr(6, 2);\n      var hexAlphaToRgbaAlpha = Number((parseInt(hexAlpha, 16) / 255).toFixed(3));\n      return 'rgba(' + red + ', ' + green + ', ' + blue + ', ' + hexAlphaToRgbaAlpha + ')';\n    }\n\n    return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n  }\n\n  res = colorRegEx2.exec(val);\n\n  if (res) {\n    parts = res[1].split(/\\s*,\\s*/);\n\n    if (parts.length !== 3) {\n      return undefined;\n    }\n\n    if (parts.every(percentRegEx.test.bind(percentRegEx))) {\n      red = Math.floor(parseFloat(parts[0].slice(0, -1)) * 255 / 100);\n      green = Math.floor(parseFloat(parts[1].slice(0, -1)) * 255 / 100);\n      blue = Math.floor(parseFloat(parts[2].slice(0, -1)) * 255 / 100);\n    } else if (parts.every(integerRegEx.test.bind(integerRegEx))) {\n      red = parseInt(parts[0], 10);\n      green = parseInt(parts[1], 10);\n      blue = parseInt(parts[2], 10);\n    } else {\n      return undefined;\n    }\n\n    red = Math.min(255, Math.max(0, red));\n    green = Math.min(255, Math.max(0, green));\n    blue = Math.min(255, Math.max(0, blue));\n    return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n  }\n\n  res = colorRegEx3.exec(val);\n\n  if (res) {\n    parts = res[1].split(/\\s*,\\s*/);\n\n    if (parts.length !== 4) {\n      return undefined;\n    }\n\n    if (parts.slice(0, 3).every(percentRegEx.test.bind(percentRegEx))) {\n      red = Math.floor(parseFloat(parts[0].slice(0, -1)) * 255 / 100);\n      green = Math.floor(parseFloat(parts[1].slice(0, -1)) * 255 / 100);\n      blue = Math.floor(parseFloat(parts[2].slice(0, -1)) * 255 / 100);\n      alpha = parseFloat(parts[3]);\n    } else if (parts.slice(0, 3).every(integerRegEx.test.bind(integerRegEx))) {\n      red = parseInt(parts[0], 10);\n      green = parseInt(parts[1], 10);\n      blue = parseInt(parts[2], 10);\n      alpha = parseFloat(parts[3]);\n    } else {\n      return undefined;\n    }\n\n    if (isNaN(alpha)) {\n      alpha = 1;\n    }\n\n    red = Math.min(255, Math.max(0, red));\n    green = Math.min(255, Math.max(0, green));\n    blue = Math.min(255, Math.max(0, blue));\n    alpha = Math.min(1, Math.max(0, alpha));\n\n    if (alpha === 1) {\n      return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n    }\n\n    return 'rgba(' + red + ', ' + green + ', ' + blue + ', ' + alpha + ')';\n  }\n\n  res = colorRegEx4.exec(val);\n\n  if (res) {\n    const [, _hue, _saturation, _lightness, _alphaString = ''] = res;\n\n    const _alpha = parseFloat(_alphaString.replace(',', '').trim());\n\n    if (!_hue || !_saturation || !_lightness) {\n      return undefined;\n    }\n\n    hue = parseFloat(_hue);\n    saturation = parseInt(_saturation, 10);\n    lightness = parseInt(_lightness, 10);\n\n    if (_alpha && numberRegEx.test(_alpha)) {\n      alpha = parseFloat(_alpha);\n    }\n\n    const [r, g, b] = hslToRgb(hue, saturation / 100, lightness / 100);\n\n    if (!_alphaString || alpha === 1) {\n      return 'rgb(' + r + ', ' + g + ', ' + b + ')';\n    }\n\n    return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + alpha + ')';\n  }\n\n  if (type === exports.TYPES.COLOR) {\n    return val;\n  }\n\n  return undefined;\n};\n\nexports.parseAngle = function parseAngle(val) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.ANGLE) {\n    return undefined;\n  }\n\n  var res = angleRegEx.exec(val);\n  var flt = parseFloat(res[1]);\n\n  if (res[2] === 'rad') {\n    flt *= 180 / Math.PI;\n  } else if (res[2] === 'grad') {\n    flt *= 360 / 400;\n  }\n\n  while (flt < 0) {\n    flt += 360;\n  }\n\n  while (flt > 360) {\n    flt -= 360;\n  }\n\n  return flt + 'deg';\n};\n\nexports.parseKeyword = function parseKeyword(val, valid_keywords) {\n  var type = exports.valueType(val);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n\n  if (type !== exports.TYPES.KEYWORD) {\n    return undefined;\n  }\n\n  val = val.toString().toLowerCase();\n  var i;\n\n  for (i = 0; i < valid_keywords.length; i++) {\n    if (valid_keywords[i].toLowerCase() === val) {\n      return valid_keywords[i];\n    }\n  }\n\n  return undefined;\n}; // utility to translate from border-width to borderWidth\n\n\nvar dashedToCamelCase = function (dashed) {\n  var i;\n  var camel = '';\n  var nextCap = false;\n\n  for (i = 0; i < dashed.length; i++) {\n    if (dashed[i] !== '-') {\n      camel += nextCap ? dashed[i].toUpperCase() : dashed[i];\n      nextCap = false;\n    } else {\n      nextCap = true;\n    }\n  }\n\n  return camel;\n};\n\nexports.dashedToCamelCase = dashedToCamelCase;\nvar is_space = /\\s/;\nvar opening_deliminators = ['\"', \"'\", '('];\nvar closing_deliminators = ['\"', \"'\", ')']; // this splits on whitespace, but keeps quoted and parened parts together\n\nvar getParts = function (str) {\n  var deliminator_stack = [];\n  var length = str.length;\n  var i;\n  var parts = [];\n  var current_part = '';\n  var opening_index;\n  var closing_index;\n\n  for (i = 0; i < length; i++) {\n    opening_index = opening_deliminators.indexOf(str[i]);\n    closing_index = closing_deliminators.indexOf(str[i]);\n\n    if (is_space.test(str[i])) {\n      if (deliminator_stack.length === 0) {\n        if (current_part !== '') {\n          parts.push(current_part);\n        }\n\n        current_part = '';\n      } else {\n        current_part += str[i];\n      }\n    } else {\n      if (str[i] === '\\\\') {\n        i++;\n        current_part += str[i];\n      } else {\n        current_part += str[i];\n\n        if (closing_index !== -1 && closing_index === deliminator_stack[deliminator_stack.length - 1]) {\n          deliminator_stack.pop();\n        } else if (opening_index !== -1) {\n          deliminator_stack.push(opening_index);\n        }\n      }\n    }\n  }\n\n  if (current_part !== '') {\n    parts.push(current_part);\n  }\n\n  return parts;\n};\n/*\n * this either returns undefined meaning that it isn't valid\n * or returns an object where the keys are dashed short\n * hand properties and the values are the values to set\n * on them\n */\n\n\nexports.shorthandParser = function parse(v, shorthand_for) {\n  var obj = {};\n  var type = exports.valueType(v);\n\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    Object.keys(shorthand_for).forEach(function (property) {\n      obj[property] = '';\n    });\n    return obj;\n  }\n\n  if (typeof v === 'number') {\n    v = v.toString();\n  }\n\n  if (typeof v !== 'string') {\n    return undefined;\n  }\n\n  if (v.toLowerCase() === 'inherit') {\n    return {};\n  }\n\n  var parts = getParts(v);\n  var valid = true;\n  parts.forEach(function (part, i) {\n    var part_valid = false;\n    Object.keys(shorthand_for).forEach(function (property) {\n      if (shorthand_for[property].isValid(part, i)) {\n        part_valid = true;\n        obj[property] = part;\n      }\n    });\n    valid = valid && part_valid;\n  });\n\n  if (!valid) {\n    return undefined;\n  }\n\n  return obj;\n};\n\nexports.shorthandSetter = function (property, shorthand_for) {\n  return function (v) {\n    var obj = exports.shorthandParser(v, shorthand_for);\n\n    if (obj === undefined) {\n      return;\n    } //console.log('shorthandSetter for:', property, 'obj:', obj);\n\n\n    Object.keys(obj).forEach(function (subprop) {\n      // in case subprop is an implicit property, this will clear\n      // *its* subpropertiesX\n      var camel = dashedToCamelCase(subprop);\n      this[camel] = obj[subprop]; // in case it gets translated into something else (0 -> 0px)\n\n      obj[subprop] = this[camel];\n      this.removeProperty(subprop); // don't add in empty properties\n\n      if (obj[subprop] !== '') {\n        this._values[subprop] = obj[subprop];\n      }\n    }, this);\n    Object.keys(shorthand_for).forEach(function (subprop) {\n      if (!obj.hasOwnProperty(subprop)) {\n        this.removeProperty(subprop);\n        delete this._values[subprop];\n      }\n    }, this); // in case the value is something like 'none' that removes all values,\n    // check that the generated one is not empty, first remove the property\n    // if it already exists, then call the shorthandGetter, if it's an empty\n    // string, don't set the property\n\n    this.removeProperty(property);\n    var calculated = exports.shorthandGetter(property, shorthand_for).call(this);\n\n    if (calculated !== '') {\n      this._setProperty(property, calculated);\n    }\n  };\n};\n\nexports.shorthandGetter = function (property, shorthand_for) {\n  return function () {\n    if (this._values[property] !== undefined) {\n      return this.getPropertyValue(property);\n    }\n\n    return Object.keys(shorthand_for).map(function (subprop) {\n      return this.getPropertyValue(subprop);\n    }, this).filter(function (value) {\n      return value !== '';\n    }).join(' ');\n  };\n}; // isValid(){1,4} | inherit\n// if one, it applies to all\n// if two, the first applies to the top and bottom, and the second to left and right\n// if three, the first applies to the top, the second to left and right, the third bottom\n// if four, top, right, bottom, left\n\n\nexports.implicitSetter = function (property_before, property_after, isValid, parser) {\n  property_after = property_after || '';\n\n  if (property_after !== '') {\n    property_after = '-' + property_after;\n  }\n\n  var part_names = ['top', 'right', 'bottom', 'left'];\n  return function (v) {\n    if (typeof v === 'number') {\n      v = v.toString();\n    }\n\n    if (typeof v !== 'string') {\n      return undefined;\n    }\n\n    var parts;\n\n    if (v.toLowerCase() === 'inherit' || v === '') {\n      parts = [v];\n    } else {\n      parts = getParts(v);\n    }\n\n    if (parts.length < 1 || parts.length > 4) {\n      return undefined;\n    }\n\n    if (!parts.every(isValid)) {\n      return undefined;\n    }\n\n    parts = parts.map(function (part) {\n      return parser(part);\n    });\n\n    this._setProperty(property_before + property_after, parts.join(' '));\n\n    if (parts.length === 1) {\n      parts[1] = parts[0];\n    }\n\n    if (parts.length === 2) {\n      parts[2] = parts[0];\n    }\n\n    if (parts.length === 3) {\n      parts[3] = parts[1];\n    }\n\n    for (var i = 0; i < 4; i++) {\n      var property = property_before + '-' + part_names[i] + property_after;\n      this.removeProperty(property);\n\n      if (parts[i] !== '') {\n        this._values[property] = parts[i];\n      }\n    }\n\n    return v;\n  };\n}; //\n//  Companion to implicitSetter, but for the individual parts.\n//  This sets the individual value, and checks to see if all four\n//  sub-parts are set.  If so, it sets the shorthand version and removes\n//  the individual parts from the cssText.\n//\n\n\nexports.subImplicitSetter = function (prefix, part, isValid, parser) {\n  var property = prefix + '-' + part;\n  var subparts = [prefix + '-top', prefix + '-right', prefix + '-bottom', prefix + '-left'];\n  return function (v) {\n    if (typeof v === 'number') {\n      v = v.toString();\n    }\n\n    if (typeof v !== 'string') {\n      return undefined;\n    }\n\n    if (!isValid(v)) {\n      return undefined;\n    }\n\n    v = parser(v);\n\n    this._setProperty(property, v);\n\n    var parts = [];\n\n    for (var i = 0; i < 4; i++) {\n      if (this._values[subparts[i]] == null || this._values[subparts[i]] === '') {\n        break;\n      }\n\n      parts.push(this._values[subparts[i]]);\n    }\n\n    if (parts.length === 4) {\n      for (i = 0; i < 4; i++) {\n        this.removeProperty(subparts[i]);\n        this._values[subparts[i]] = parts[i];\n      }\n\n      this._setProperty(prefix, parts.join(' '));\n    }\n\n    return v;\n  };\n};\n\nvar camel_to_dashed = /[A-Z]/g;\nvar first_segment = /^\\([^-]\\)-/;\nvar vendor_prefixes = ['o', 'moz', 'ms', 'webkit'];\n\nexports.camelToDashed = function (camel_case) {\n  var match;\n  var dashed = camel_case.replace(camel_to_dashed, '-$&').toLowerCase();\n  match = dashed.match(first_segment);\n\n  if (match && vendor_prefixes.indexOf(match[1]) !== -1) {\n    dashed = '-' + dashed;\n  }\n\n  return dashed;\n};","map":{"version":3,"names":["namedColors","require","hslToRgb","exports","TYPES","INTEGER","NUMBER","LENGTH","PERCENT","URL","COLOR","STRING","ANGLE","KEYWORD","NULL_OR_EMPTY_STR","CALC","integerRegEx","numberRegEx","lengthRegEx","percentRegEx","urlRegEx","stringRegEx","colorRegEx1","colorRegEx2","colorRegEx3","calcRegEx","colorRegEx4","angleRegEx","valueType","val","toString","undefined","test","res","exec","parts","split","length","every","bind","slice","toLowerCase","includes","parseInteger","type","String","parseInt","parseNumber","parseFloat","parseLength","parsePercent","parseMeasurement","parseUrl","str","substr","i","parseString","parseColor","red","green","blue","hue","saturation","lightness","alpha","defaultHex","hex","hexAlpha","hexAlphaToRgbaAlpha","Number","toFixed","Math","floor","min","max","isNaN","_hue","_saturation","_lightness","_alphaString","_alpha","replace","trim","r","g","b","parseAngle","flt","PI","parseKeyword","valid_keywords","dashedToCamelCase","dashed","camel","nextCap","toUpperCase","is_space","opening_deliminators","closing_deliminators","getParts","deliminator_stack","current_part","opening_index","closing_index","indexOf","push","pop","shorthandParser","parse","v","shorthand_for","obj","Object","keys","forEach","property","valid","part","part_valid","isValid","shorthandSetter","subprop","removeProperty","_values","hasOwnProperty","calculated","shorthandGetter","call","_setProperty","getPropertyValue","map","filter","value","join","implicitSetter","property_before","property_after","parser","part_names","subImplicitSetter","prefix","subparts","camel_to_dashed","first_segment","vendor_prefixes","camelToDashed","camel_case","match"],"sources":["C:/Users/17033/balmco/node_modules/cssstyle/lib/parsers.js"],"sourcesContent":["/*********************************************************************\n * These are commonly used parsers for CSS Values they take a string *\n * to parse and return a string after it's been converted, if needed *\n ********************************************************************/\n'use strict';\n\nconst namedColors = require('./named_colors.json');\nconst { hslToRgb } = require('./utils/colorSpace');\n\nexports.TYPES = {\n  INTEGER: 1,\n  NUMBER: 2,\n  LENGTH: 3,\n  PERCENT: 4,\n  URL: 5,\n  COLOR: 6,\n  STRING: 7,\n  ANGLE: 8,\n  KEYWORD: 9,\n  NULL_OR_EMPTY_STR: 10,\n  CALC: 11,\n};\n\n// rough regular expressions\nvar integerRegEx = /^[-+]?[0-9]+$/;\nvar numberRegEx = /^[-+]?[0-9]*\\.?[0-9]+$/;\nvar lengthRegEx = /^(0|[-+]?[0-9]*\\.?[0-9]+(in|cm|em|mm|pt|pc|px|ex|rem|vh|vw|ch))$/;\nvar percentRegEx = /^[-+]?[0-9]*\\.?[0-9]+%$/;\nvar urlRegEx = /^url\\(\\s*([^)]*)\\s*\\)$/;\nvar stringRegEx = /^(\"[^\"]*\"|'[^']*')$/;\nvar colorRegEx1 = /^#([0-9a-fA-F]{3,4}){1,2}$/;\nvar colorRegEx2 = /^rgb\\(([^)]*)\\)$/;\nvar colorRegEx3 = /^rgba\\(([^)]*)\\)$/;\nvar calcRegEx = /^calc\\(([^)]*)\\)$/;\nvar colorRegEx4 = /^hsla?\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*(,\\s*(-?\\d+|-?\\d*.\\d+)\\s*)?\\)/;\nvar angleRegEx = /^([-+]?[0-9]*\\.?[0-9]+)(deg|grad|rad)$/;\n\n// This will return one of the above types based on the passed in string\nexports.valueType = function valueType(val) {\n  if (val === '' || val === null) {\n    return exports.TYPES.NULL_OR_EMPTY_STR;\n  }\n  if (typeof val === 'number') {\n    val = val.toString();\n  }\n\n  if (typeof val !== 'string') {\n    return undefined;\n  }\n\n  if (integerRegEx.test(val)) {\n    return exports.TYPES.INTEGER;\n  }\n  if (numberRegEx.test(val)) {\n    return exports.TYPES.NUMBER;\n  }\n  if (lengthRegEx.test(val)) {\n    return exports.TYPES.LENGTH;\n  }\n  if (percentRegEx.test(val)) {\n    return exports.TYPES.PERCENT;\n  }\n  if (urlRegEx.test(val)) {\n    return exports.TYPES.URL;\n  }\n  if (calcRegEx.test(val)) {\n    return exports.TYPES.CALC;\n  }\n  if (stringRegEx.test(val)) {\n    return exports.TYPES.STRING;\n  }\n  if (angleRegEx.test(val)) {\n    return exports.TYPES.ANGLE;\n  }\n  if (colorRegEx1.test(val)) {\n    return exports.TYPES.COLOR;\n  }\n\n  var res = colorRegEx2.exec(val);\n  var parts;\n  if (res !== null) {\n    parts = res[1].split(/\\s*,\\s*/);\n    if (parts.length !== 3) {\n      return undefined;\n    }\n    if (\n      parts.every(percentRegEx.test.bind(percentRegEx)) ||\n      parts.every(integerRegEx.test.bind(integerRegEx))\n    ) {\n      return exports.TYPES.COLOR;\n    }\n    return undefined;\n  }\n  res = colorRegEx3.exec(val);\n  if (res !== null) {\n    parts = res[1].split(/\\s*,\\s*/);\n    if (parts.length !== 4) {\n      return undefined;\n    }\n    if (\n      parts.slice(0, 3).every(percentRegEx.test.bind(percentRegEx)) ||\n      parts.slice(0, 3).every(integerRegEx.test.bind(integerRegEx))\n    ) {\n      if (numberRegEx.test(parts[3])) {\n        return exports.TYPES.COLOR;\n      }\n    }\n    return undefined;\n  }\n\n  if (colorRegEx4.test(val)) {\n    return exports.TYPES.COLOR;\n  }\n\n  // could still be a color, one of the standard keyword colors\n  val = val.toLowerCase();\n\n  if (namedColors.includes(val)) {\n    return exports.TYPES.COLOR;\n  }\n\n  switch (val) {\n    // the following are deprecated in CSS3\n    case 'activeborder':\n    case 'activecaption':\n    case 'appworkspace':\n    case 'background':\n    case 'buttonface':\n    case 'buttonhighlight':\n    case 'buttonshadow':\n    case 'buttontext':\n    case 'captiontext':\n    case 'graytext':\n    case 'highlight':\n    case 'highlighttext':\n    case 'inactiveborder':\n    case 'inactivecaption':\n    case 'inactivecaptiontext':\n    case 'infobackground':\n    case 'infotext':\n    case 'menu':\n    case 'menutext':\n    case 'scrollbar':\n    case 'threeddarkshadow':\n    case 'threedface':\n    case 'threedhighlight':\n    case 'threedlightshadow':\n    case 'threedshadow':\n    case 'window':\n    case 'windowframe':\n    case 'windowtext':\n      return exports.TYPES.COLOR;\n    default:\n      return exports.TYPES.KEYWORD;\n  }\n};\n\nexports.parseInteger = function parseInteger(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.INTEGER) {\n    return undefined;\n  }\n  return String(parseInt(val, 10));\n};\n\nexports.parseNumber = function parseNumber(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.NUMBER && type !== exports.TYPES.INTEGER) {\n    return undefined;\n  }\n  return String(parseFloat(val));\n};\n\nexports.parseLength = function parseLength(val) {\n  if (val === 0 || val === '0') {\n    return '0px';\n  }\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.LENGTH) {\n    return undefined;\n  }\n  return val;\n};\n\nexports.parsePercent = function parsePercent(val) {\n  if (val === 0 || val === '0') {\n    return '0%';\n  }\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.PERCENT) {\n    return undefined;\n  }\n  return val;\n};\n\n// either a length or a percent\nexports.parseMeasurement = function parseMeasurement(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.CALC) {\n    return val;\n  }\n\n  var length = exports.parseLength(val);\n  if (length !== undefined) {\n    return length;\n  }\n  return exports.parsePercent(val);\n};\n\nexports.parseUrl = function parseUrl(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  var res = urlRegEx.exec(val);\n  // does it match the regex?\n  if (!res) {\n    return undefined;\n  }\n  var str = res[1];\n  // if it starts with single or double quotes, does it end with the same?\n  if ((str[0] === '\"' || str[0] === \"'\") && str[0] !== str[str.length - 1]) {\n    return undefined;\n  }\n  if (str[0] === '\"' || str[0] === \"'\") {\n    str = str.substr(1, str.length - 2);\n  }\n\n  var i;\n  for (i = 0; i < str.length; i++) {\n    switch (str[i]) {\n      case '(':\n      case ')':\n      case ' ':\n      case '\\t':\n      case '\\n':\n      case \"'\":\n      case '\"':\n        return undefined;\n      case '\\\\':\n        i++;\n        break;\n    }\n  }\n\n  return 'url(' + str + ')';\n};\n\nexports.parseString = function parseString(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.STRING) {\n    return undefined;\n  }\n  var i;\n  for (i = 1; i < val.length - 1; i++) {\n    switch (val[i]) {\n      case val[0]:\n        return undefined;\n      case '\\\\':\n        i++;\n        while (i < val.length - 1 && /[0-9A-Fa-f]/.test(val[i])) {\n          i++;\n        }\n        break;\n    }\n  }\n  if (i >= val.length) {\n    return undefined;\n  }\n  return val;\n};\n\nexports.parseColor = function parseColor(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  var red,\n    green,\n    blue,\n    hue,\n    saturation,\n    lightness,\n    alpha = 1;\n  var parts;\n  var res = colorRegEx1.exec(val);\n  // is it #aaa, #ababab, #aaaa, #abababaa\n  if (res) {\n    var defaultHex = val.substr(1);\n    var hex = val.substr(1);\n    if (hex.length === 3 || hex.length === 4) {\n      hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n\n      if (defaultHex.length === 4) {\n        hex = hex + defaultHex[3] + defaultHex[3];\n      }\n    }\n    red = parseInt(hex.substr(0, 2), 16);\n    green = parseInt(hex.substr(2, 2), 16);\n    blue = parseInt(hex.substr(4, 2), 16);\n    if (hex.length === 8) {\n      var hexAlpha = hex.substr(6, 2);\n      var hexAlphaToRgbaAlpha = Number((parseInt(hexAlpha, 16) / 255).toFixed(3));\n\n      return 'rgba(' + red + ', ' + green + ', ' + blue + ', ' + hexAlphaToRgbaAlpha + ')';\n    }\n    return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n  }\n\n  res = colorRegEx2.exec(val);\n  if (res) {\n    parts = res[1].split(/\\s*,\\s*/);\n    if (parts.length !== 3) {\n      return undefined;\n    }\n    if (parts.every(percentRegEx.test.bind(percentRegEx))) {\n      red = Math.floor((parseFloat(parts[0].slice(0, -1)) * 255) / 100);\n      green = Math.floor((parseFloat(parts[1].slice(0, -1)) * 255) / 100);\n      blue = Math.floor((parseFloat(parts[2].slice(0, -1)) * 255) / 100);\n    } else if (parts.every(integerRegEx.test.bind(integerRegEx))) {\n      red = parseInt(parts[0], 10);\n      green = parseInt(parts[1], 10);\n      blue = parseInt(parts[2], 10);\n    } else {\n      return undefined;\n    }\n    red = Math.min(255, Math.max(0, red));\n    green = Math.min(255, Math.max(0, green));\n    blue = Math.min(255, Math.max(0, blue));\n    return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n  }\n\n  res = colorRegEx3.exec(val);\n  if (res) {\n    parts = res[1].split(/\\s*,\\s*/);\n    if (parts.length !== 4) {\n      return undefined;\n    }\n    if (parts.slice(0, 3).every(percentRegEx.test.bind(percentRegEx))) {\n      red = Math.floor((parseFloat(parts[0].slice(0, -1)) * 255) / 100);\n      green = Math.floor((parseFloat(parts[1].slice(0, -1)) * 255) / 100);\n      blue = Math.floor((parseFloat(parts[2].slice(0, -1)) * 255) / 100);\n      alpha = parseFloat(parts[3]);\n    } else if (parts.slice(0, 3).every(integerRegEx.test.bind(integerRegEx))) {\n      red = parseInt(parts[0], 10);\n      green = parseInt(parts[1], 10);\n      blue = parseInt(parts[2], 10);\n      alpha = parseFloat(parts[3]);\n    } else {\n      return undefined;\n    }\n    if (isNaN(alpha)) {\n      alpha = 1;\n    }\n    red = Math.min(255, Math.max(0, red));\n    green = Math.min(255, Math.max(0, green));\n    blue = Math.min(255, Math.max(0, blue));\n    alpha = Math.min(1, Math.max(0, alpha));\n    if (alpha === 1) {\n      return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\n    }\n    return 'rgba(' + red + ', ' + green + ', ' + blue + ', ' + alpha + ')';\n  }\n\n  res = colorRegEx4.exec(val);\n  if (res) {\n    const [, _hue, _saturation, _lightness, _alphaString = ''] = res;\n    const _alpha = parseFloat(_alphaString.replace(',', '').trim());\n    if (!_hue || !_saturation || !_lightness) {\n      return undefined;\n    }\n    hue = parseFloat(_hue);\n    saturation = parseInt(_saturation, 10);\n    lightness = parseInt(_lightness, 10);\n    if (_alpha && numberRegEx.test(_alpha)) {\n      alpha = parseFloat(_alpha);\n    }\n\n    const [r, g, b] = hslToRgb(hue, saturation / 100, lightness / 100);\n    if (!_alphaString || alpha === 1) {\n      return 'rgb(' + r + ', ' + g + ', ' + b + ')';\n    }\n    return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + alpha + ')';\n  }\n\n  if (type === exports.TYPES.COLOR) {\n    return val;\n  }\n  return undefined;\n};\n\nexports.parseAngle = function parseAngle(val) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.ANGLE) {\n    return undefined;\n  }\n  var res = angleRegEx.exec(val);\n  var flt = parseFloat(res[1]);\n  if (res[2] === 'rad') {\n    flt *= 180 / Math.PI;\n  } else if (res[2] === 'grad') {\n    flt *= 360 / 400;\n  }\n\n  while (flt < 0) {\n    flt += 360;\n  }\n  while (flt > 360) {\n    flt -= 360;\n  }\n  return flt + 'deg';\n};\n\nexports.parseKeyword = function parseKeyword(val, valid_keywords) {\n  var type = exports.valueType(val);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    return val;\n  }\n  if (type !== exports.TYPES.KEYWORD) {\n    return undefined;\n  }\n  val = val.toString().toLowerCase();\n  var i;\n  for (i = 0; i < valid_keywords.length; i++) {\n    if (valid_keywords[i].toLowerCase() === val) {\n      return valid_keywords[i];\n    }\n  }\n  return undefined;\n};\n\n// utility to translate from border-width to borderWidth\nvar dashedToCamelCase = function(dashed) {\n  var i;\n  var camel = '';\n  var nextCap = false;\n  for (i = 0; i < dashed.length; i++) {\n    if (dashed[i] !== '-') {\n      camel += nextCap ? dashed[i].toUpperCase() : dashed[i];\n      nextCap = false;\n    } else {\n      nextCap = true;\n    }\n  }\n  return camel;\n};\nexports.dashedToCamelCase = dashedToCamelCase;\n\nvar is_space = /\\s/;\nvar opening_deliminators = ['\"', \"'\", '('];\nvar closing_deliminators = ['\"', \"'\", ')'];\n// this splits on whitespace, but keeps quoted and parened parts together\nvar getParts = function(str) {\n  var deliminator_stack = [];\n  var length = str.length;\n  var i;\n  var parts = [];\n  var current_part = '';\n  var opening_index;\n  var closing_index;\n  for (i = 0; i < length; i++) {\n    opening_index = opening_deliminators.indexOf(str[i]);\n    closing_index = closing_deliminators.indexOf(str[i]);\n    if (is_space.test(str[i])) {\n      if (deliminator_stack.length === 0) {\n        if (current_part !== '') {\n          parts.push(current_part);\n        }\n        current_part = '';\n      } else {\n        current_part += str[i];\n      }\n    } else {\n      if (str[i] === '\\\\') {\n        i++;\n        current_part += str[i];\n      } else {\n        current_part += str[i];\n        if (\n          closing_index !== -1 &&\n          closing_index === deliminator_stack[deliminator_stack.length - 1]\n        ) {\n          deliminator_stack.pop();\n        } else if (opening_index !== -1) {\n          deliminator_stack.push(opening_index);\n        }\n      }\n    }\n  }\n  if (current_part !== '') {\n    parts.push(current_part);\n  }\n  return parts;\n};\n\n/*\n * this either returns undefined meaning that it isn't valid\n * or returns an object where the keys are dashed short\n * hand properties and the values are the values to set\n * on them\n */\nexports.shorthandParser = function parse(v, shorthand_for) {\n  var obj = {};\n  var type = exports.valueType(v);\n  if (type === exports.TYPES.NULL_OR_EMPTY_STR) {\n    Object.keys(shorthand_for).forEach(function(property) {\n      obj[property] = '';\n    });\n    return obj;\n  }\n\n  if (typeof v === 'number') {\n    v = v.toString();\n  }\n\n  if (typeof v !== 'string') {\n    return undefined;\n  }\n\n  if (v.toLowerCase() === 'inherit') {\n    return {};\n  }\n  var parts = getParts(v);\n  var valid = true;\n  parts.forEach(function(part, i) {\n    var part_valid = false;\n    Object.keys(shorthand_for).forEach(function(property) {\n      if (shorthand_for[property].isValid(part, i)) {\n        part_valid = true;\n        obj[property] = part;\n      }\n    });\n    valid = valid && part_valid;\n  });\n  if (!valid) {\n    return undefined;\n  }\n  return obj;\n};\n\nexports.shorthandSetter = function(property, shorthand_for) {\n  return function(v) {\n    var obj = exports.shorthandParser(v, shorthand_for);\n    if (obj === undefined) {\n      return;\n    }\n    //console.log('shorthandSetter for:', property, 'obj:', obj);\n    Object.keys(obj).forEach(function(subprop) {\n      // in case subprop is an implicit property, this will clear\n      // *its* subpropertiesX\n      var camel = dashedToCamelCase(subprop);\n      this[camel] = obj[subprop];\n      // in case it gets translated into something else (0 -> 0px)\n      obj[subprop] = this[camel];\n      this.removeProperty(subprop);\n      // don't add in empty properties\n      if (obj[subprop] !== '') {\n        this._values[subprop] = obj[subprop];\n      }\n    }, this);\n    Object.keys(shorthand_for).forEach(function(subprop) {\n      if (!obj.hasOwnProperty(subprop)) {\n        this.removeProperty(subprop);\n        delete this._values[subprop];\n      }\n    }, this);\n    // in case the value is something like 'none' that removes all values,\n    // check that the generated one is not empty, first remove the property\n    // if it already exists, then call the shorthandGetter, if it's an empty\n    // string, don't set the property\n    this.removeProperty(property);\n    var calculated = exports.shorthandGetter(property, shorthand_for).call(this);\n    if (calculated !== '') {\n      this._setProperty(property, calculated);\n    }\n  };\n};\n\nexports.shorthandGetter = function(property, shorthand_for) {\n  return function() {\n    if (this._values[property] !== undefined) {\n      return this.getPropertyValue(property);\n    }\n    return Object.keys(shorthand_for)\n      .map(function(subprop) {\n        return this.getPropertyValue(subprop);\n      }, this)\n      .filter(function(value) {\n        return value !== '';\n      })\n      .join(' ');\n  };\n};\n\n// isValid(){1,4} | inherit\n// if one, it applies to all\n// if two, the first applies to the top and bottom, and the second to left and right\n// if three, the first applies to the top, the second to left and right, the third bottom\n// if four, top, right, bottom, left\nexports.implicitSetter = function(property_before, property_after, isValid, parser) {\n  property_after = property_after || '';\n  if (property_after !== '') {\n    property_after = '-' + property_after;\n  }\n  var part_names = ['top', 'right', 'bottom', 'left'];\n\n  return function(v) {\n    if (typeof v === 'number') {\n      v = v.toString();\n    }\n    if (typeof v !== 'string') {\n      return undefined;\n    }\n    var parts;\n    if (v.toLowerCase() === 'inherit' || v === '') {\n      parts = [v];\n    } else {\n      parts = getParts(v);\n    }\n    if (parts.length < 1 || parts.length > 4) {\n      return undefined;\n    }\n\n    if (!parts.every(isValid)) {\n      return undefined;\n    }\n\n    parts = parts.map(function(part) {\n      return parser(part);\n    });\n    this._setProperty(property_before + property_after, parts.join(' '));\n    if (parts.length === 1) {\n      parts[1] = parts[0];\n    }\n    if (parts.length === 2) {\n      parts[2] = parts[0];\n    }\n    if (parts.length === 3) {\n      parts[3] = parts[1];\n    }\n\n    for (var i = 0; i < 4; i++) {\n      var property = property_before + '-' + part_names[i] + property_after;\n      this.removeProperty(property);\n      if (parts[i] !== '') {\n        this._values[property] = parts[i];\n      }\n    }\n    return v;\n  };\n};\n\n//\n//  Companion to implicitSetter, but for the individual parts.\n//  This sets the individual value, and checks to see if all four\n//  sub-parts are set.  If so, it sets the shorthand version and removes\n//  the individual parts from the cssText.\n//\nexports.subImplicitSetter = function(prefix, part, isValid, parser) {\n  var property = prefix + '-' + part;\n  var subparts = [prefix + '-top', prefix + '-right', prefix + '-bottom', prefix + '-left'];\n\n  return function(v) {\n    if (typeof v === 'number') {\n      v = v.toString();\n    }\n    if (typeof v !== 'string') {\n      return undefined;\n    }\n    if (!isValid(v)) {\n      return undefined;\n    }\n    v = parser(v);\n    this._setProperty(property, v);\n    var parts = [];\n    for (var i = 0; i < 4; i++) {\n      if (this._values[subparts[i]] == null || this._values[subparts[i]] === '') {\n        break;\n      }\n      parts.push(this._values[subparts[i]]);\n    }\n    if (parts.length === 4) {\n      for (i = 0; i < 4; i++) {\n        this.removeProperty(subparts[i]);\n        this._values[subparts[i]] = parts[i];\n      }\n      this._setProperty(prefix, parts.join(' '));\n    }\n    return v;\n  };\n};\n\nvar camel_to_dashed = /[A-Z]/g;\nvar first_segment = /^\\([^-]\\)-/;\nvar vendor_prefixes = ['o', 'moz', 'ms', 'webkit'];\nexports.camelToDashed = function(camel_case) {\n  var match;\n  var dashed = camel_case.replace(camel_to_dashed, '-$&').toLowerCase();\n  match = dashed.match(first_segment);\n  if (match && vendor_prefixes.indexOf(match[1]) !== -1) {\n    dashed = '-' + dashed;\n  }\n  return dashed;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}