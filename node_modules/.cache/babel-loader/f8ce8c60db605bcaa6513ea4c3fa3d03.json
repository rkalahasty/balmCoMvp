{"ast":null,"code":"\"use strict\";\n\nconst ValidityState = require(\"../generated/ValidityState\");\n\nconst {\n  isDisabled\n} = require(\"../helpers/form-controls\");\n\nconst {\n  closest\n} = require(\"../helpers/traversal\");\n\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\n\nexports.implementation = class DefaultConstraintValidationImpl {\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-willvalidate\n  get willValidate() {\n    return this._isCandidateForConstraintValidation();\n  }\n\n  get validity() {\n    if (!this._validity) {\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this\n      });\n    }\n\n    return this._validity;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-checkvalidity\n\n\n  checkValidity() {\n    if (!this._isCandidateForConstraintValidation()) {\n      return true;\n    }\n\n    if (this._satisfiesConstraints()) {\n      return true;\n    }\n\n    fireAnEvent(\"invalid\", this, undefined, {\n      cancelable: true\n    });\n    return false;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-setcustomvalidity\n\n\n  setCustomValidity(message) {\n    this._customValidityErrorMessage = message;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-reportvalidity\n  // Since jsdom has no user interaction, it's the same as #checkValidity\n\n\n  reportValidity() {\n    return this.checkValidity();\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-validationmessage\n\n\n  get validationMessage() {\n    const {\n      validity\n    } = this;\n\n    if (!this._isCandidateForConstraintValidation() || this._satisfiesConstraints()) {\n      return \"\";\n    }\n\n    const isSufferingFromCustomError = validity.customError;\n\n    if (isSufferingFromCustomError) {\n      return this._customValidityErrorMessage;\n    }\n\n    return \"Constraints not satisfied\";\n  }\n\n  _isCandidateForConstraintValidation() {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\n    return !isDisabled(this) && // If an element has a datalist element ancestor,\n    // it is barred from constraint validation.\n    closest(this, \"datalist\") === null && !this._barredFromConstraintValidationSpecialization();\n  }\n\n  _isBarredFromConstraintValidation() {\n    return !this._isCandidateForConstraintValidation();\n  }\n\n  _satisfiesConstraints() {\n    return this.validity.valid;\n  }\n\n};","map":{"version":3,"names":["ValidityState","require","isDisabled","closest","fireAnEvent","exports","implementation","DefaultConstraintValidationImpl","willValidate","_isCandidateForConstraintValidation","validity","_validity","createImpl","_globalObject","element","checkValidity","_satisfiesConstraints","undefined","cancelable","setCustomValidity","message","_customValidityErrorMessage","reportValidity","validationMessage","isSufferingFromCustomError","customError","_barredFromConstraintValidationSpecialization","_isBarredFromConstraintValidation","valid"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/constraint-validation/DefaultConstraintValidation-impl.js"],"sourcesContent":["\"use strict\";\n\nconst ValidityState = require(\"../generated/ValidityState\");\nconst { isDisabled } = require(\"../helpers/form-controls\");\nconst { closest } = require(\"../helpers/traversal\");\nconst { fireAnEvent } = require(\"../helpers/events\");\n\nexports.implementation = class DefaultConstraintValidationImpl {\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-willvalidate\n  get willValidate() {\n    return this._isCandidateForConstraintValidation();\n  }\n\n  get validity() {\n    if (!this._validity) {\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this\n      });\n    }\n    return this._validity;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-checkvalidity\n  checkValidity() {\n    if (!this._isCandidateForConstraintValidation()) {\n      return true;\n    }\n    if (this._satisfiesConstraints()) {\n      return true;\n    }\n    fireAnEvent(\"invalid\", this, undefined, { cancelable: true });\n    return false;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-setcustomvalidity\n  setCustomValidity(message) {\n    this._customValidityErrorMessage = message;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-reportvalidity\n  // Since jsdom has no user interaction, it's the same as #checkValidity\n  reportValidity() {\n    return this.checkValidity();\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-validationmessage\n  get validationMessage() {\n    const { validity } = this;\n    if (!this._isCandidateForConstraintValidation() || this._satisfiesConstraints()) {\n      return \"\";\n    }\n    const isSufferingFromCustomError = validity.customError;\n    if (isSufferingFromCustomError) {\n      return this._customValidityErrorMessage;\n    }\n    return \"Constraints not satisfied\";\n  }\n\n  _isCandidateForConstraintValidation() {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\n    return !isDisabled(this) &&\n      // If an element has a datalist element ancestor,\n      // it is barred from constraint validation.\n      closest(this, \"datalist\") === null &&\n      !this._barredFromConstraintValidationSpecialization();\n  }\n\n  _isBarredFromConstraintValidation() {\n    return !this._isCandidateForConstraintValidation();\n  }\n\n  _satisfiesConstraints() {\n    return this.validity.valid;\n  }\n};\n"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,4BAAD,CAA7B;;AACA,MAAM;EAAEC;AAAF,IAAiBD,OAAO,CAAC,0BAAD,CAA9B;;AACA,MAAM;EAAEE;AAAF,IAAcF,OAAO,CAAC,sBAAD,CAA3B;;AACA,MAAM;EAAEG;AAAF,IAAkBH,OAAO,CAAC,mBAAD,CAA/B;;AAEAI,OAAO,CAACC,cAAR,GAAyB,MAAMC,+BAAN,CAAsC;EAC7D;EACgB,IAAZC,YAAY,GAAG;IACjB,OAAO,KAAKC,mCAAL,EAAP;EACD;;EAEW,IAARC,QAAQ,GAAG;IACb,IAAI,CAAC,KAAKC,SAAV,EAAqB;MACnB,KAAKA,SAAL,GAAiBX,aAAa,CAACY,UAAd,CAAyB,KAAKC,aAA9B,EAA6C,EAA7C,EAAiD;QAChEC,OAAO,EAAE;MADuD,CAAjD,CAAjB;IAGD;;IACD,OAAO,KAAKH,SAAZ;EACD,CAb4D,CAe7D;;;EACAI,aAAa,GAAG;IACd,IAAI,CAAC,KAAKN,mCAAL,EAAL,EAAiD;MAC/C,OAAO,IAAP;IACD;;IACD,IAAI,KAAKO,qBAAL,EAAJ,EAAkC;MAChC,OAAO,IAAP;IACD;;IACDZ,WAAW,CAAC,SAAD,EAAY,IAAZ,EAAkBa,SAAlB,EAA6B;MAAEC,UAAU,EAAE;IAAd,CAA7B,CAAX;IACA,OAAO,KAAP;EACD,CAzB4D,CA2B7D;;;EACAC,iBAAiB,CAACC,OAAD,EAAU;IACzB,KAAKC,2BAAL,GAAmCD,OAAnC;EACD,CA9B4D,CAgC7D;EACA;;;EACAE,cAAc,GAAG;IACf,OAAO,KAAKP,aAAL,EAAP;EACD,CApC4D,CAsC7D;;;EACqB,IAAjBQ,iBAAiB,GAAG;IACtB,MAAM;MAAEb;IAAF,IAAe,IAArB;;IACA,IAAI,CAAC,KAAKD,mCAAL,EAAD,IAA+C,KAAKO,qBAAL,EAAnD,EAAiF;MAC/E,OAAO,EAAP;IACD;;IACD,MAAMQ,0BAA0B,GAAGd,QAAQ,CAACe,WAA5C;;IACA,IAAID,0BAAJ,EAAgC;MAC9B,OAAO,KAAKH,2BAAZ;IACD;;IACD,OAAO,2BAAP;EACD;;EAEDZ,mCAAmC,GAAG;IACpC;IACA,OAAO,CAACP,UAAU,CAAC,IAAD,CAAX,IACL;IACA;IACAC,OAAO,CAAC,IAAD,EAAO,UAAP,CAAP,KAA8B,IAHzB,IAIL,CAAC,KAAKuB,6CAAL,EAJH;EAKD;;EAEDC,iCAAiC,GAAG;IAClC,OAAO,CAAC,KAAKlB,mCAAL,EAAR;EACD;;EAEDO,qBAAqB,GAAG;IACtB,OAAO,KAAKN,QAAL,CAAckB,KAArB;EACD;;AAlE4D,CAA/D"},"metadata":{},"sourceType":"script"}