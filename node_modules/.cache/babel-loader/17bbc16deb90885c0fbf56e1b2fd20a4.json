{"ast":null,"code":"\"use strict\";\n\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\n\nconst MouseEvent = require(\"../generated/MouseEvent\");\n\nconst {\n  domSymbolTree\n} = require(\"../helpers/internal-constants\");\n\nconst NODE_TYPE = require(\"../node-type\");\n\nconst {\n  isLabelable,\n  isDisabled,\n  isInteractiveContent\n} = require(\"../helpers/form-controls\");\n\nconst {\n  isInclusiveAncestor\n} = require(\"../helpers/node\");\n\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\n\nfunction sendClickToAssociatedNode(node) {\n  fireAnEvent(\"click\", node, MouseEvent, {\n    bubbles: true,\n    cancelable: true,\n    view: node.ownerDocument ? node.ownerDocument.defaultView : null,\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    button: 0,\n    detail: 1,\n    relatedTarget: null\n  });\n}\n\nclass HTMLLabelElementImpl extends HTMLElementImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this._hasActivationBehavior = true;\n  }\n\n  get control() {\n    if (this.hasAttributeNS(null, \"for\")) {\n      const forValue = this.getAttributeNS(null, \"for\");\n\n      if (forValue === \"\") {\n        return null;\n      }\n\n      const root = this.getRootNode({});\n\n      for (const descendant of domSymbolTree.treeIterator(root)) {\n        if (descendant.nodeType === NODE_TYPE.ELEMENT_NODE && descendant.getAttributeNS(null, \"id\") === forValue) {\n          return isLabelable(descendant) ? descendant : null;\n        }\n      }\n\n      return null;\n    }\n\n    for (const descendant of domSymbolTree.treeIterator(this)) {\n      if (isLabelable(descendant)) {\n        return descendant;\n      }\n    }\n\n    return null;\n  }\n\n  get form() {\n    const node = this.control;\n\n    if (node) {\n      return node.form;\n    }\n\n    return null;\n  }\n\n  _activationBehavior(event) {\n    // Check if the event's target is an inclusive descendant of any interactive content descendant of this <label>.\n    // If so, do nothing.\n    if (event.target && event.target !== this && isInclusiveAncestor(this, event.target)) {\n      for (const ancestor of domSymbolTree.ancestorsIterator(event.target)) {\n        if (ancestor === this) {\n          break;\n        }\n\n        if (isInteractiveContent(ancestor)) {\n          return;\n        }\n      }\n    }\n\n    const node = this.control;\n\n    if (node && !isDisabled(node)) {\n      // Check if the control is an inclusive ancestor of the event's target (and has already received this event).\n      // If so, do nothing.\n      // See https://github.com/whatwg/html/issues/5415.\n      if (event.target && isInclusiveAncestor(node, event.target)) {\n        return;\n      }\n\n      sendClickToAssociatedNode(node);\n    }\n  }\n\n}\n\nmodule.exports = {\n  implementation: HTMLLabelElementImpl\n};","map":{"version":3,"names":["HTMLElementImpl","require","implementation","MouseEvent","domSymbolTree","NODE_TYPE","isLabelable","isDisabled","isInteractiveContent","isInclusiveAncestor","fireAnEvent","sendClickToAssociatedNode","node","bubbles","cancelable","view","ownerDocument","defaultView","screenX","screenY","clientX","clientY","button","detail","relatedTarget","HTMLLabelElementImpl","constructor","globalObject","args","privateData","_hasActivationBehavior","control","hasAttributeNS","forValue","getAttributeNS","root","getRootNode","descendant","treeIterator","nodeType","ELEMENT_NODE","form","_activationBehavior","event","target","ancestor","ancestorsIterator","module","exports"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/nodes/HTMLLabelElement-impl.js"],"sourcesContent":["\"use strict\";\n\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst MouseEvent = require(\"../generated/MouseEvent\");\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\nconst NODE_TYPE = require(\"../node-type\");\nconst { isLabelable, isDisabled, isInteractiveContent } = require(\"../helpers/form-controls\");\nconst { isInclusiveAncestor } = require(\"../helpers/node\");\nconst { fireAnEvent } = require(\"../helpers/events\");\n\nfunction sendClickToAssociatedNode(node) {\n  fireAnEvent(\"click\", node, MouseEvent, {\n    bubbles: true,\n    cancelable: true,\n    view: node.ownerDocument ? node.ownerDocument.defaultView : null,\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    button: 0,\n    detail: 1,\n    relatedTarget: null\n  });\n}\n\nclass HTMLLabelElementImpl extends HTMLElementImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n\n    this._hasActivationBehavior = true;\n  }\n\n  get control() {\n    if (this.hasAttributeNS(null, \"for\")) {\n      const forValue = this.getAttributeNS(null, \"for\");\n      if (forValue === \"\") {\n        return null;\n      }\n      const root = this.getRootNode({});\n      for (const descendant of domSymbolTree.treeIterator(root)) {\n        if (descendant.nodeType === NODE_TYPE.ELEMENT_NODE &&\n          descendant.getAttributeNS(null, \"id\") === forValue) {\n          return isLabelable(descendant) ? descendant : null;\n        }\n      }\n      return null;\n    }\n    for (const descendant of domSymbolTree.treeIterator(this)) {\n      if (isLabelable(descendant)) {\n        return descendant;\n      }\n    }\n    return null;\n  }\n\n  get form() {\n    const node = this.control;\n    if (node) {\n      return node.form;\n    }\n    return null;\n  }\n\n  _activationBehavior(event) {\n    // Check if the event's target is an inclusive descendant of any interactive content descendant of this <label>.\n    // If so, do nothing.\n    if (event.target && event.target !== this && isInclusiveAncestor(this, event.target)) {\n      for (const ancestor of domSymbolTree.ancestorsIterator(event.target)) {\n        if (ancestor === this) {\n          break;\n        }\n        if (isInteractiveContent(ancestor)) {\n          return;\n        }\n      }\n    }\n\n    const node = this.control;\n    if (node && !isDisabled(node)) {\n      // Check if the control is an inclusive ancestor of the event's target (and has already received this event).\n      // If so, do nothing.\n      // See https://github.com/whatwg/html/issues/5415.\n      if (event.target && isInclusiveAncestor(node, event.target)) {\n        return;\n      }\n\n      sendClickToAssociatedNode(node);\n    }\n  }\n}\n\nmodule.exports = {\n  implementation: HTMLLabelElementImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}