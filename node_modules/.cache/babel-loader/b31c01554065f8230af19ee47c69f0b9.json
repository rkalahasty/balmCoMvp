{"ast":null,"code":"\"use strict\";\n\nconst util = require(\"util\");\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\n\nconst {\n  createAnEvent\n} = require(\"../helpers/events\");\n\nconst errorReportingMode = Symbol(\"error reporting mode\"); // https://html.spec.whatwg.org/multipage/webappapis.html#report-the-error\n// Omits script parameter and any check for muted errors.\n// Takes target as an EventTarget impl.\n// Takes error object, message, and location as params, unlike the spec.\n// Returns whether the event was handled or not.\n\nfunction reportAnError(line, col, target, errorObject, message, location) {\n  if (target[errorReportingMode]) {\n    return false;\n  }\n\n  target[errorReportingMode] = true;\n\n  if (typeof message !== \"string\") {\n    message = \"uncaught exception: \" + util.inspect(errorObject);\n  }\n\n  const event = createAnEvent(\"error\", target._globalObject, ErrorEvent, {\n    cancelable: true,\n    message,\n    filename: location,\n    lineno: line,\n    colno: col,\n    error: errorObject\n  });\n\n  try {\n    target._dispatch(event);\n  } finally {\n    target[errorReportingMode] = false;\n    return event.defaultPrevented;\n  }\n}\n\nmodule.exports = function reportException(window, error, filenameHint) {\n  // This function will give good results on real Error objects with stacks; poor ones otherwise\n  const stack = error && error.stack;\n  const lines = stack && stack.split(\"\\n\"); // Find the first line that matches; important for multi-line messages\n\n  let pieces;\n\n  if (lines) {\n    for (let i = 1; i < lines.length && !pieces; ++i) {\n      pieces = lines[i].match(/at (?:(.+)\\s+)?\\(?(?:(.+?):(\\d+):(\\d+)|([^)]+))\\)?/);\n    }\n  }\n\n  const fileName = pieces && pieces[2] || filenameHint || window._document.URL;\n  const lineNumber = pieces && parseInt(pieces[3]) || 0;\n  const columnNumber = pieces && parseInt(pieces[4]) || 0;\n  const windowImpl = idlUtils.implForWrapper(window);\n  const handled = reportAnError(lineNumber, columnNumber, windowImpl, error, error && error.message, fileName);\n\n  if (!handled) {\n    const errorString = shouldBeDisplayedAsError(error) ? `[${error.name}: ${error.message}]` : util.inspect(error);\n    const jsdomError = new Error(`Uncaught ${errorString}`);\n    jsdomError.detail = error;\n    jsdomError.type = \"unhandled exception\";\n\n    window._virtualConsole.emit(\"jsdomError\", jsdomError);\n  }\n};\n\nfunction shouldBeDisplayedAsError(x) {\n  return x && x.name && x.message !== undefined && x.stack;\n}","map":{"version":3,"names":["util","require","idlUtils","ErrorEvent","createAnEvent","errorReportingMode","Symbol","reportAnError","line","col","target","errorObject","message","location","inspect","event","_globalObject","cancelable","filename","lineno","colno","error","_dispatch","defaultPrevented","module","exports","reportException","window","filenameHint","stack","lines","split","pieces","i","length","match","fileName","_document","URL","lineNumber","parseInt","columnNumber","windowImpl","implForWrapper","handled","errorString","shouldBeDisplayedAsError","name","jsdomError","Error","detail","type","_virtualConsole","emit","x","undefined"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js"],"sourcesContent":["\"use strict\";\nconst util = require(\"util\");\nconst idlUtils = require(\"../generated/utils\");\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\nconst { createAnEvent } = require(\"../helpers/events\");\n\nconst errorReportingMode = Symbol(\"error reporting mode\");\n\n// https://html.spec.whatwg.org/multipage/webappapis.html#report-the-error\n// Omits script parameter and any check for muted errors.\n// Takes target as an EventTarget impl.\n// Takes error object, message, and location as params, unlike the spec.\n// Returns whether the event was handled or not.\nfunction reportAnError(line, col, target, errorObject, message, location) {\n  if (target[errorReportingMode]) {\n    return false;\n  }\n\n  target[errorReportingMode] = true;\n\n  if (typeof message !== \"string\") {\n    message = \"uncaught exception: \" + util.inspect(errorObject);\n  }\n\n  const event = createAnEvent(\"error\", target._globalObject, ErrorEvent, {\n    cancelable: true,\n    message,\n    filename: location,\n    lineno: line,\n    colno: col,\n    error: errorObject\n  });\n\n  try {\n    target._dispatch(event);\n  } finally {\n    target[errorReportingMode] = false;\n    return event.defaultPrevented;\n  }\n}\n\nmodule.exports = function reportException(window, error, filenameHint) {\n  // This function will give good results on real Error objects with stacks; poor ones otherwise\n\n  const stack = error && error.stack;\n  const lines = stack && stack.split(\"\\n\");\n\n  // Find the first line that matches; important for multi-line messages\n  let pieces;\n  if (lines) {\n    for (let i = 1; i < lines.length && !pieces; ++i) {\n      pieces = lines[i].match(/at (?:(.+)\\s+)?\\(?(?:(.+?):(\\d+):(\\d+)|([^)]+))\\)?/);\n    }\n  }\n\n  const fileName = (pieces && pieces[2]) || filenameHint || window._document.URL;\n  const lineNumber = (pieces && parseInt(pieces[3])) || 0;\n  const columnNumber = (pieces && parseInt(pieces[4])) || 0;\n\n  const windowImpl = idlUtils.implForWrapper(window);\n\n  const handled = reportAnError(lineNumber, columnNumber, windowImpl, error, error && error.message, fileName);\n\n  if (!handled) {\n    const errorString = shouldBeDisplayedAsError(error) ? `[${error.name}: ${error.message}]` : util.inspect(error);\n    const jsdomError = new Error(`Uncaught ${errorString}`);\n    jsdomError.detail = error;\n    jsdomError.type = \"unhandled exception\";\n\n    window._virtualConsole.emit(\"jsdomError\", jsdomError);\n  }\n};\n\nfunction shouldBeDisplayedAsError(x) {\n  return x && x.name && x.message !== undefined && x.stack;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}