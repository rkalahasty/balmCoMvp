{"ast":null,"code":"\"use strict\";\n\nconst webIDLConversions = require(\"webidl-conversions\");\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst NODE_TYPE = require(\"../node-type\");\n\nconst {\n  HTML_NS\n} = require(\"../helpers/namespaces\");\n\nconst {\n  getHTMLElementInterface\n} = require(\"../helpers/create-element\");\n\nconst {\n  shadowIncludingInclusiveDescendantsIterator\n} = require(\"../helpers/shadow-dom\");\n\nconst {\n  isValidCustomElementName,\n  tryUpgradeElement,\n  enqueueCEUpgradeReaction\n} = require(\"../helpers/custom-elements\");\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst IDLFunction = require(\"../generated/Function.js\");\n\nconst HTMLUnknownElement = require(\"../generated/HTMLUnknownElement\");\n\nconst LIFECYCLE_CALLBACKS = [\"connectedCallback\", \"disconnectedCallback\", \"adoptedCallback\", \"attributeChangedCallback\"];\n\nfunction convertToSequenceDOMString(obj) {\n  if (!obj || !obj[Symbol.iterator]) {\n    throw new TypeError(\"Invalid Sequence\");\n  }\n\n  return Array.from(obj).map(webIDLConversions.DOMString);\n} // Returns true is the passed value is a valid constructor.\n// Borrowed from: https://stackoverflow.com/a/39336206/3832710\n\n\nfunction isConstructor(value) {\n  if (typeof value !== \"function\") {\n    return false;\n  }\n\n  try {\n    const P = new Proxy(value, {\n      construct() {\n        return {};\n      }\n\n    }); // eslint-disable-next-line no-new\n\n    new P();\n    return true;\n  } catch {\n    return false;\n  }\n} // https://html.spec.whatwg.org/#customelementregistry\n\n\nclass CustomElementRegistryImpl {\n  constructor(globalObject) {\n    this._customElementDefinitions = [];\n    this._elementDefinitionIsRunning = false;\n    this._whenDefinedPromiseMap = Object.create(null);\n    this._globalObject = globalObject;\n  } // https://html.spec.whatwg.org/#dom-customelementregistry-define\n\n\n  define(name, constructor, options) {\n    const {\n      _globalObject\n    } = this;\n    const ctor = constructor.objectReference;\n\n    if (!isConstructor(ctor)) {\n      throw new TypeError(\"Constructor argument is not a constructor.\");\n    }\n\n    if (!isValidCustomElementName(name)) {\n      throw DOMException.create(_globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]);\n    }\n\n    const nameAlreadyRegistered = this._customElementDefinitions.some(entry => entry.name === name);\n\n    if (nameAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\"This name has already been registered in the registry.\", \"NotSupportedError\"]);\n    }\n\n    const ctorAlreadyRegistered = this._customElementDefinitions.some(entry => entry.objectReference === ctor);\n\n    if (ctorAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\"This constructor has already been registered in the registry.\", \"NotSupportedError\"]);\n    }\n\n    let localName = name;\n    let extendsOption = null;\n\n    if (options !== undefined && options.extends) {\n      extendsOption = options.extends;\n    }\n\n    if (extendsOption !== null) {\n      if (isValidCustomElementName(extendsOption)) {\n        throw DOMException.create(_globalObject, [\"Option extends value can't be a valid custom element name.\", \"NotSupportedError\"]);\n      }\n\n      const extendsInterface = getHTMLElementInterface(extendsOption);\n\n      if (extendsInterface === HTMLUnknownElement) {\n        throw DOMException.create(_globalObject, [`${extendsOption} is an HTMLUnknownElement.`, \"NotSupportedError\"]);\n      }\n\n      localName = extendsOption;\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw DOMException.create(_globalObject, [\"Invalid nested custom element definition.\", \"NotSupportedError\"]);\n    }\n\n    this._elementDefinitionIsRunning = true;\n    let disableShadow = false;\n    let observedAttributes = [];\n    const lifecycleCallbacks = {\n      connectedCallback: null,\n      disconnectedCallback: null,\n      adoptedCallback: null,\n      attributeChangedCallback: null\n    };\n    let caughtError;\n\n    try {\n      const {\n        prototype\n      } = ctor;\n\n      if (typeof prototype !== \"object\") {\n        throw new TypeError(\"Invalid constructor prototype.\");\n      }\n\n      for (const callbackName of LIFECYCLE_CALLBACKS) {\n        const callbackValue = prototype[callbackName];\n\n        if (callbackValue !== undefined) {\n          lifecycleCallbacks[callbackName] = IDLFunction.convert(callbackValue, {\n            context: `The lifecycle callback \"${callbackName}\"`\n          });\n        }\n      }\n\n      if (lifecycleCallbacks.attributeChangedCallback !== null) {\n        const observedAttributesIterable = ctor.observedAttributes;\n\n        if (observedAttributesIterable !== undefined) {\n          observedAttributes = convertToSequenceDOMString(observedAttributesIterable);\n        }\n      }\n\n      let disabledFeatures = [];\n      const disabledFeaturesIterable = ctor.disabledFeatures;\n\n      if (disabledFeaturesIterable) {\n        disabledFeatures = convertToSequenceDOMString(disabledFeaturesIterable);\n      }\n\n      disableShadow = disabledFeatures.includes(\"shadow\");\n    } catch (err) {\n      caughtError = err;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    if (caughtError !== undefined) {\n      throw caughtError;\n    }\n\n    const definition = {\n      name,\n      localName,\n      constructor,\n      objectReference: ctor,\n      observedAttributes,\n      lifecycleCallbacks,\n      disableShadow,\n      constructionStack: []\n    };\n\n    this._customElementDefinitions.push(definition);\n\n    const document = idlUtils.implForWrapper(this._globalObject._document);\n    const upgradeCandidates = [];\n\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(document)) {\n      if (candidate._namespaceURI === HTML_NS && candidate._localName === localName && (extendsOption === null || candidate._isValue === name)) {\n        upgradeCandidates.push(candidate);\n      }\n    }\n\n    for (const upgradeCandidate of upgradeCandidates) {\n      enqueueCEUpgradeReaction(upgradeCandidate, definition);\n    }\n\n    if (this._whenDefinedPromiseMap[name] !== undefined) {\n      this._whenDefinedPromiseMap[name].resolve(ctor);\n\n      delete this._whenDefinedPromiseMap[name];\n    }\n  } // https://html.spec.whatwg.org/#dom-customelementregistry-get\n\n\n  get(name) {\n    const definition = this._customElementDefinitions.find(entry => entry.name === name);\n\n    return definition && definition.objectReference;\n  } // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined\n\n\n  whenDefined(name) {\n    if (!isValidCustomElementName(name)) {\n      return Promise.reject(DOMException.create(this._globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]));\n    }\n\n    const alreadyRegistered = this._customElementDefinitions.find(entry => entry.name === name);\n\n    if (alreadyRegistered) {\n      return Promise.resolve(alreadyRegistered.objectReference);\n    }\n\n    if (this._whenDefinedPromiseMap[name] === undefined) {\n      let resolve;\n      const promise = new Promise(r => {\n        resolve = r;\n      }); // Store the pending Promise along with the extracted resolve callback to actually resolve the returned Promise,\n      // once the custom element is registered.\n\n      this._whenDefinedPromiseMap[name] = {\n        promise,\n        resolve\n      };\n    }\n\n    return this._whenDefinedPromiseMap[name].promise;\n  } // https://html.spec.whatwg.org/#dom-customelementregistry-upgrade\n\n\n  upgrade(root) {\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(root)) {\n      if (candidate.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        tryUpgradeElement(candidate);\n      }\n    }\n  }\n\n}\n\nmodule.exports = {\n  implementation: CustomElementRegistryImpl\n};","map":{"version":3,"names":["webIDLConversions","require","DOMException","NODE_TYPE","HTML_NS","getHTMLElementInterface","shadowIncludingInclusiveDescendantsIterator","isValidCustomElementName","tryUpgradeElement","enqueueCEUpgradeReaction","idlUtils","IDLFunction","HTMLUnknownElement","LIFECYCLE_CALLBACKS","convertToSequenceDOMString","obj","Symbol","iterator","TypeError","Array","from","map","DOMString","isConstructor","value","P","Proxy","construct","CustomElementRegistryImpl","constructor","globalObject","_customElementDefinitions","_elementDefinitionIsRunning","_whenDefinedPromiseMap","Object","create","_globalObject","define","name","options","ctor","objectReference","nameAlreadyRegistered","some","entry","ctorAlreadyRegistered","localName","extendsOption","undefined","extends","extendsInterface","disableShadow","observedAttributes","lifecycleCallbacks","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","caughtError","prototype","callbackName","callbackValue","convert","context","observedAttributesIterable","disabledFeatures","disabledFeaturesIterable","includes","err","definition","constructionStack","push","document","implForWrapper","_document","upgradeCandidates","candidate","_namespaceURI","_localName","_isValue","upgradeCandidate","resolve","get","find","whenDefined","Promise","reject","alreadyRegistered","promise","r","upgrade","root","nodeType","ELEMENT_NODE","module","exports","implementation"],"sources":["C:/Users/17033/balmco/node_modules/jsdom/lib/jsdom/living/custom-elements/CustomElementRegistry-impl.js"],"sourcesContent":["\"use strict\";\n\nconst webIDLConversions = require(\"webidl-conversions\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst NODE_TYPE = require(\"../node-type\");\n\nconst { HTML_NS } = require(\"../helpers/namespaces\");\nconst { getHTMLElementInterface } = require(\"../helpers/create-element\");\nconst { shadowIncludingInclusiveDescendantsIterator } = require(\"../helpers/shadow-dom\");\nconst { isValidCustomElementName, tryUpgradeElement, enqueueCEUpgradeReaction } = require(\"../helpers/custom-elements\");\n\nconst idlUtils = require(\"../generated/utils\");\nconst IDLFunction = require(\"../generated/Function.js\");\nconst HTMLUnknownElement = require(\"../generated/HTMLUnknownElement\");\n\nconst LIFECYCLE_CALLBACKS = [\n  \"connectedCallback\",\n  \"disconnectedCallback\",\n  \"adoptedCallback\",\n  \"attributeChangedCallback\"\n];\n\nfunction convertToSequenceDOMString(obj) {\n  if (!obj || !obj[Symbol.iterator]) {\n    throw new TypeError(\"Invalid Sequence\");\n  }\n\n  return Array.from(obj).map(webIDLConversions.DOMString);\n}\n\n// Returns true is the passed value is a valid constructor.\n// Borrowed from: https://stackoverflow.com/a/39336206/3832710\nfunction isConstructor(value) {\n  if (typeof value !== \"function\") {\n    return false;\n  }\n\n  try {\n    const P = new Proxy(value, {\n      construct() {\n        return {};\n      }\n    });\n\n    // eslint-disable-next-line no-new\n    new P();\n\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n// https://html.spec.whatwg.org/#customelementregistry\nclass CustomElementRegistryImpl {\n  constructor(globalObject) {\n    this._customElementDefinitions = [];\n    this._elementDefinitionIsRunning = false;\n    this._whenDefinedPromiseMap = Object.create(null);\n\n    this._globalObject = globalObject;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-define\n  define(name, constructor, options) {\n    const { _globalObject } = this;\n    const ctor = constructor.objectReference;\n\n    if (!isConstructor(ctor)) {\n      throw new TypeError(\"Constructor argument is not a constructor.\");\n    }\n\n    if (!isValidCustomElementName(name)) {\n      throw DOMException.create(_globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]);\n    }\n\n    const nameAlreadyRegistered = this._customElementDefinitions.some(entry => entry.name === name);\n    if (nameAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\n        \"This name has already been registered in the registry.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    const ctorAlreadyRegistered = this._customElementDefinitions.some(entry => entry.objectReference === ctor);\n    if (ctorAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\n        \"This constructor has already been registered in the registry.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    let localName = name;\n\n    let extendsOption = null;\n    if (options !== undefined && options.extends) {\n      extendsOption = options.extends;\n    }\n\n    if (extendsOption !== null) {\n      if (isValidCustomElementName(extendsOption)) {\n        throw DOMException.create(_globalObject, [\n          \"Option extends value can't be a valid custom element name.\",\n          \"NotSupportedError\"\n        ]);\n      }\n\n      const extendsInterface = getHTMLElementInterface(extendsOption);\n      if (extendsInterface === HTMLUnknownElement) {\n        throw DOMException.create(_globalObject, [\n          `${extendsOption} is an HTMLUnknownElement.`,\n          \"NotSupportedError\"\n        ]);\n      }\n\n      localName = extendsOption;\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw DOMException.create(_globalObject, [\n        \"Invalid nested custom element definition.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    this._elementDefinitionIsRunning = true;\n\n    let disableShadow = false;\n    let observedAttributes = [];\n    const lifecycleCallbacks = {\n      connectedCallback: null,\n      disconnectedCallback: null,\n      adoptedCallback: null,\n      attributeChangedCallback: null\n    };\n\n    let caughtError;\n    try {\n      const { prototype } = ctor;\n\n      if (typeof prototype !== \"object\") {\n        throw new TypeError(\"Invalid constructor prototype.\");\n      }\n\n      for (const callbackName of LIFECYCLE_CALLBACKS) {\n        const callbackValue = prototype[callbackName];\n\n        if (callbackValue !== undefined) {\n          lifecycleCallbacks[callbackName] = IDLFunction.convert(callbackValue, {\n            context: `The lifecycle callback \"${callbackName}\"`\n          });\n        }\n      }\n\n      if (lifecycleCallbacks.attributeChangedCallback !== null) {\n        const observedAttributesIterable = ctor.observedAttributes;\n\n        if (observedAttributesIterable !== undefined) {\n          observedAttributes = convertToSequenceDOMString(observedAttributesIterable);\n        }\n      }\n\n      let disabledFeatures = [];\n      const disabledFeaturesIterable = ctor.disabledFeatures;\n      if (disabledFeaturesIterable) {\n        disabledFeatures = convertToSequenceDOMString(disabledFeaturesIterable);\n      }\n\n      disableShadow = disabledFeatures.includes(\"shadow\");\n    } catch (err) {\n      caughtError = err;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    if (caughtError !== undefined) {\n      throw caughtError;\n    }\n\n    const definition = {\n      name,\n      localName,\n      constructor,\n      objectReference: ctor,\n      observedAttributes,\n      lifecycleCallbacks,\n      disableShadow,\n      constructionStack: []\n    };\n\n    this._customElementDefinitions.push(definition);\n\n    const document = idlUtils.implForWrapper(this._globalObject._document);\n\n    const upgradeCandidates = [];\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(document)) {\n      if (\n        (candidate._namespaceURI === HTML_NS && candidate._localName === localName) &&\n        (extendsOption === null || candidate._isValue === name)\n      ) {\n        upgradeCandidates.push(candidate);\n      }\n    }\n\n    for (const upgradeCandidate of upgradeCandidates) {\n      enqueueCEUpgradeReaction(upgradeCandidate, definition);\n    }\n\n    if (this._whenDefinedPromiseMap[name] !== undefined) {\n      this._whenDefinedPromiseMap[name].resolve(ctor);\n      delete this._whenDefinedPromiseMap[name];\n    }\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-get\n  get(name) {\n    const definition = this._customElementDefinitions.find(entry => entry.name === name);\n    return definition && definition.objectReference;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined\n  whenDefined(name) {\n    if (!isValidCustomElementName(name)) {\n      return Promise.reject(DOMException.create(\n        this._globalObject,\n        [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]\n      ));\n    }\n\n    const alreadyRegistered = this._customElementDefinitions.find(entry => entry.name === name);\n    if (alreadyRegistered) {\n      return Promise.resolve(alreadyRegistered.objectReference);\n    }\n\n    if (this._whenDefinedPromiseMap[name] === undefined) {\n      let resolve;\n      const promise = new Promise(r => {\n        resolve = r;\n      });\n\n      // Store the pending Promise along with the extracted resolve callback to actually resolve the returned Promise,\n      // once the custom element is registered.\n      this._whenDefinedPromiseMap[name] = {\n        promise,\n        resolve\n      };\n    }\n\n    return this._whenDefinedPromiseMap[name].promise;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-upgrade\n  upgrade(root) {\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(root)) {\n      if (candidate.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        tryUpgradeElement(candidate);\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  implementation: CustomElementRegistryImpl\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}